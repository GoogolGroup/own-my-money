webpackJsonp([1],{"/8fb":function(t,a){},0:function(t,a){},"5xS1":function(t,a){},"6VUo":function(t,a){},K5tM:function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),i=e("mvHQ"),r=e.n(i),n=new s.default,o="/server/api/",l={user:{authenticated:!1,token:null,id:null,login:null},login:function(t,a,e){var s=this;t.$http.post(o+"users/tokens",a).then(function(a){s.handleToken(a.body),n.$emit("user-logged",s.user),e?t.$router.replace(e):t.$router.replace({name:"home"})},function(a){t.isLoading=!1,a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText})},logout:function(){return localStorage.removeItem("user"),this.user.authenticated=!1,delete s.default.http.headers.common.Authorization,this.user={},this.user},getAuthHeader:function(){var t=this.getToken();return t?"Bearer "+t:null},populate:function(t){if(t){this.user.token=t.token,this.user.id=t.id,this.user.login=t.login,this.user.mail=t.mail;var a={};t.scope&&t.scope.split(" ").forEach(function(t){a[t]=!0}),this.user.scope=a,this.user.exp=t.exp,this.user.authenticated=t.exp>Math.floor(Date.now()/1e3)}},handleToken:function(t){if(!t||!t.token)return!1;var a=t.token.split(".");if(3!==a.length)return!1;try{var e=JSON.parse(atob(a[1]));return e.token=t.token,e.id=e.sub,delete e.sub,localStorage.setItem("user",r()(e)),this.populate(e),s.default.http.headers.common.Authorization=this.getAuthHeader(),!0}catch(t){return console.error(t),!1}},getProfile:function(){return!!this.getToken()&&JSON.parse(r()(this.user))},getToken:function(){try{var t=JSON.parse(localStorage.getItem("user"));return this.populate(t),this.user.token}catch(t){return console.error(t),!1}}},c={name:"app",data:function(){return{user:l.getProfile()}},methods:{logout:function(){this.user=l.logout(),this.$router.replace({name:"login"})},toggleMenu:function(t){t.target.classList.toggle("is-active"),document.getElementById("navbar-menu").classList.toggle("is-active")}},mounted:function(){var t=this;n.$on("user-logged",function(a){t.user=a})}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[t.user.authenticated?e("nav",{staticClass:"navbar is-dark is-fixed-top"},[e("div",{staticClass:"navbar-brand"},[e("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[e("img",{attrs:{src:"/static/icon-whitesmoke.svg"}}),t._v(" OwnMyMoney")]),t._v(" "),e("a",{staticClass:"navbar-burger",attrs:{role:"button",id:"navbar-burger","aria-label":"menu","aria-expanded":"false"},on:{click:t.toggleMenu}},[e("span",{staticClass:"is-primary",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",{attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",{attrs:{"aria-hidden":"true"}})])],1),t._v(" "),e("div",{staticClass:"navbar-menu",attrs:{id:"navbar-menu"}},[e("div",{staticClass:"navbar-start"},[e("router-link",{staticClass:"navbar-item",attrs:{to:"/accounts"}},[e("i",{staticClass:"fa fa-table fa-fw"}),t._v(" Accounts")])],1),t._v(" "),e("div",{staticClass:"navbar-end"},[this.user.scope.admin?e("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[t._m(0),t._v(" "),e("div",{staticClass:"navbar-dropdown is-right"},[e("router-link",{staticClass:"navbar-item",attrs:{to:"/categories"}},[e("i",{staticClass:"fa fa-folder-open-o fa-fw"}),t._v(" Categories")]),t._v(" "),e("router-link",{staticClass:"navbar-item",attrs:{to:"/maps"}},[e("i",{staticClass:"fa fa-random fa-fw"}),t._v(" Transaction mapping")]),t._v(" "),e("router-link",{staticClass:"navbar-item",attrs:{to:"/users"}},[e("i",{staticClass:"fa fa-users fa-fw"}),t._v(" Users")])],1)]):t._e(),t._v(" "),e("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[e("a",{staticClass:"navbar-link"},[e("i",{staticClass:"fa fa-user fa-fw"}),t._v(" "+t._s(this.user.login))]),t._v(" "),e("div",{staticClass:"navbar-dropdown is-right"},[e("router-link",{staticClass:"navbar-item",attrs:{to:"/profile"}},[e("i",{staticClass:"fa fa-user-circle fa-fw"}),t._v(" Profile")]),t._v(" "),e("router-link",{staticClass:"navbar-item",attrs:{to:"/patterns"}},[e("i",{staticClass:"fa fa-magic fa-fw"}),t._v(" Patterns")]),t._v(" "),e("hr",{staticClass:"navbar-divider"}),t._v(" "),e("router-link",{staticClass:"navbar-item",attrs:{to:"/about"}},[e("i",{staticClass:"fa fa-info-circle fa-fw"}),t._v(" About")]),t._v(" "),t._m(1),t._v(" "),e("hr",{staticClass:"navbar-divider"}),t._v(" "),e("a",{staticClass:"navbar-item",on:{click:function(a){t.logout()}}},[e("i",{staticClass:"fa fa-sign-out fa-fw"}),t._v(" Logout")])],1)])])])]):t._e(),t._v(" "),e("router-view",{key:t.$route.fullPath})],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"navbar-link"},[a("i",{staticClass:"fa fa-wrench fa-fw"}),this._v(" System settings")])},function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"navbar-item",attrs:{href:"https://github.com/nioc/own-my-money/issues/new",target:"_blank"}},[a("i",{staticClass:"fa fa-bug fa-fw"}),this._v(" Report a bug")])}]},u=e("VU/8")(c,d,!1,null,null,null).exports,v=e("/ocq"),m={props:{items:{type:Array,required:!0}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"box is-radiusless has-background-white-bis"},[e("nav",{staticClass:"breadcrumb container",attrs:{"aria-label":"breadcrumbs"}},[e("ul",t._l(t.items,function(a){return e("li",{key:a.text,class:{"is-active":a.isActive}},[e("router-link",{attrs:{to:a.link}},[a.icon?e("span",{staticClass:"icon is-small"},[e("i",{staticClass:"fa",class:a.icon,attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),e("span",{class:{"is-hidden-mobile":a.icon}},[t._v(t._s(a.text))])])],1)}))])])},staticRenderFns:[]};var h=e("VU/8")(m,p,!1,function(t){e("RgOD")},null,null).exports,f={data:function(){return{account:{},error:"",isLoading:!1,rAccounts:this.$resource(o+"accounts{/id}")}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(a){a&&(t.isLoading=!0,t.rAccounts.save(t.account).then(function(a){t.$parent.$parent.getAccounts(),t.$parent.close()},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1}))})}}},g={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("form",{attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateBeforeSubmit(a)}}},[e("div",{staticClass:"modal-card"},[t._m(0),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Bank identifier")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.account.bankId,expression:"account.bankId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("bankId")},attrs:{type:"text",name:"bankId",placeholder:"Bank Id","data-vv-as":"bank id"},domProps:{value:t.account.bankId},on:{input:function(a){a.target.composing||t.$set(t.account,"bankId",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("bankId"),expression:"errors.has('bankId')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("bankId")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Branch identifier")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.account.branchId,expression:"account.branchId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("BranchId")},attrs:{type:"text",name:"BranchId",placeholder:"Branch Id","data-vv-as":"branch id"},domProps:{value:t.account.branchId},on:{input:function(a){a.target.composing||t.$set(t.account,"branchId",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("BranchId"),expression:"errors.has('BranchId')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("BranchId")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Account identifier")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.account.accountId,expression:"account.accountId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("AccountId")},attrs:{type:"text",name:"AccountId",placeholder:"Account Id","data-vv-as":"account id"},domProps:{value:t.account.accountId},on:{input:function(a){a.target.composing||t.$set(t.account,"accountId",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("AccountId"),expression:"errors.has('AccountId')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("AccountId")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Label")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.account.label,expression:"account.label"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:"Label of your choice"},domProps:{value:t.account.label},on:{input:function(a){a.target.composing||t.$set(t.account,"label",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])])]),t._v(" "),t.error?e("div",{staticClass:"message is-danger block"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e()]),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button is-primary"},[t._v("Create")]),t._v(" "),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(a){t.$parent.close()}}},[t._v("Cancel")])]),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[this._v("New account")])])}]},b={name:"accounts",components:{Breadcrumb:h,CreateAccount:e("VU/8")(f,g,!1,null,null,null).exports},data:function(){return{accounts:[],error:"",isCreateAccountModalActive:!1,isLoading:!1,upload:{file:null,isUploading:!1,result:""},rAccounts:this.$resource(o+"accounts{/id}"),rDatasets:this.$resource(o+"dataset")}},methods:{getAccounts:function(){var t=this;this.isLoading=!0,this.rAccounts.query().then(function(a){t.accounts=a.body},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})},uploadDataset:function(){var t=this;this.upload.result="";var a=this.upload.file,e=new FormData;e.append("Content-Type",a.type||"application/octet-stream"),e.append("file",a),a.size>8e7?this.upload.result="File too big":(this.upload.isUploading=!0,this.isLoading=!0,this.rDatasets.save({},e).then(function(a){a.body.message&&(t.upload.result=a.body.message),t.getAccounts()},function(a){a.body.message?t.upload.result=a.body.message:t.upload.result=a.status+" - "+a.statusText}).finally(function(){this.upload.isUploading=!1,this.isLoading=!1}))}},mounted:function(){this.getAccounts()}},_={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/accounts",icon:"fa-table",text:"Accounts",isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Accounts")]),t._v(" "),t.error?e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e(),t._v(" "),t.accounts.length?e("div",{staticClass:"table-container"},[e("table",{staticClass:"table is-striped is-hoverable is-fullwidth"},[t._m(0),t._v(" "),e("tbody",t._l(t.accounts,function(a){return e("tr",{key:a.id},[e("td",[e("router-link",{attrs:{to:{name:"account",params:{id:a.id}}}},[t._v(t._s(a.bankId)+" "+t._s(a.branchId)+" "+t._s(a.accountId)),a.label?e("span",[t._v(" ("+t._s(a.label)+")")]):t._e()])],1),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.balance)))]),t._v(" "),a.lastUpdate?e("td",[t._v(t._s(t._f("moment")(a.lastUpdate,"DD/MM/YYYY HH:mm")))]):e("td")])}))])]):e("div",[e("p",[t._v("There is no account yet")])]),t._v(" "),e("div",{staticClass:"field is-grouped"},[e("p",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{role:"button"},on:{click:function(a){t.isCreateAccountModalActive=!0}}},[e("i",{staticClass:"fa fa-plus"}),t._v(" Add account")])]),t._v(" "),e("p",{staticClass:"control"},[e("b-field",{staticClass:"file"},[e("b-upload",{attrs:{disabled:t.upload.isUploading},on:{input:t.uploadDataset},model:{value:t.upload.file,callback:function(a){t.$set(t.upload,"file",a)},expression:"upload.file"}},[e("a",{staticClass:"button is-primary"},[e("b-icon",{attrs:{icon:"upload"}}),t._v(" "),e("span",[t._v("Upload OFX")])],1)]),t._v(" "),t.upload.file?e("span",{staticClass:"file-name"},[t._v("\n              "+t._s(t.upload.file.name)+" ("+t._s(t.upload.file.size)+" bytes)\n            ")]):t._e()],1)],1)]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-body"},[t.upload.result?e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n              "+t._s(t.upload.result)+"\n            ")])]):t._e()])]),t._v(" "),e("b-modal",{attrs:{active:t.isCreateAccountModalActive,"has-modal-card":"",scroll:"keep"},on:{"update:active":function(a){t.isCreateAccountModalActive=a}}},[e("create-account")],1),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",[this._v("Account")]),this._v(" "),a("th",[this._v("Balance")]),this._v(" "),a("th",[this._v("Updated")])])])}]},C=e("VU/8")(b,_,!1,null,null,null).exports,y=e("BO1k"),w=e.n(y),x=e("8+8L");s.default.use(x.a);var k={data:function(){return{categories:[],categoriesAndSubcategoriesLookup:[],rCategories:s.default.resource(o+"categories{/id}")}},methods:{handleResponse:function(t){this.categories=t,this.categoriesAndSubcategoriesLookup=function(t){for(var a=[],e=0;e<t.length;e++){var s=t[e];a[s.id]=s;for(var i=0;i<s.sub.length;i++){var r=s.sub[i];a[r.id]=r}}return a}(this.categories)},getCategories:function(t){var a=this,e="categoriesActives",s={};t&&(e="categories",s={status:"all"}),localStorage.getItem(e)?this.handleResponse(JSON.parse(localStorage.getItem(e))):this.rCategories.query(s).then(function(t){a.handleResponse(t.body),localStorage.setItem(e,r()(a.categories))},function(t){console.error(t)})}}},$={props:["rTransactions","transaction"],mixins:[k],data:function(){return{error:"",isLoading:!1,currentDate:new Date,rCategories:this.$resource(o+"categories{/id}")}},computed:{dateUser:{get:function(){return this.$moment(this.transaction.dateUser).toDate()},set:function(t){this.transaction.dateUser=this.$moment(t).format()}}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(a){a&&(t.isLoading=!0,t.transaction.amount=parseFloat(t.transaction.amount),t.rTransactions.update({id:t.transaction.id},t.transaction).then(function(a){t.$parent.close()},function(a){t.isLoading=!1,a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}))})}},watch:{"transaction.category":function(){this.transaction.subcategory=""}},mounted:function(){this.getCategories(!1)}},A={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("form",{attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateBeforeSubmit(a)}}},[e("div",{staticClass:"modal-card"},[t._m(0),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Name")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.name,expression:"transaction.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input",class:{"is-danger":t.errors.has("name")},attrs:{type:"text",name:"name",placeholder:"Transaction name (from bank)"},domProps:{value:t.transaction.name},on:{input:function(a){a.target.composing||t.$set(t.transaction,"name",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("name")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Amount")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.amount,expression:"transaction.amount"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input",class:{"is-danger":t.errors.has("amount")},attrs:{type:"number",name:"amount",placeholder:"Amount"},domProps:{value:t.transaction.amount},on:{input:function(a){a.target.composing||t.$set(t.transaction,"amount",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("amount"),expression:"errors.has('amount')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("amount")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Date")]),t._v(" "),e("div",{staticClass:"control"},[e("b-datepicker",{attrs:{placeholder:"End date",icon:"calendar",readonly:!1,"max-date":t.currentDate},model:{value:t.dateUser,callback:function(a){t.dateUser=a},expression:"dateUser"}})],1)]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Note")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.note,expression:"transaction.note"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"input",class:{"is-danger":t.errors.has("note")},attrs:{type:"text",name:"note",placeholder:"Note of your choice"},domProps:{value:t.transaction.note},on:{input:function(a){a.target.composing||t.$set(t.transaction,"note",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("note"),expression:"errors.has('note')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("note")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Category")]),t._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.transaction.category,expression:"transaction.category"}],attrs:{name:"parent"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.transaction,"category",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- Category --")]),t._v(" "),t._l(t.categories,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])})],2)])])]),t._v(" "),t.transaction.category&&t.categoriesAndSubcategoriesLookup[t.transaction.category]&&t.categoriesAndSubcategoriesLookup[t.transaction.category].sub.length>0?e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Subcategory")]),t._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.transaction.subcategory,expression:"transaction.subcategory"}],attrs:{name:"parent"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.transaction,"subcategory",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- Subcategory --")]),t._v(" "),t._l(t.categoriesAndSubcategoriesLookup[t.transaction.category].sub,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])})],2)])])]):t._e(),t._v(" "),t.error?e("div",{staticClass:"message is-danger block"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e()]),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button is-primary"},[t._v("Save")]),t._v(" "),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(a){t.$parent.close()}}},[t._v("Cancel")])]),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[this._v("Transaction")])])}]},L={name:"transactions",components:{Transaction:e("VU/8")($,A,!1,null,null,null).exports},props:["url"],mixins:[k],data:function(){var t=new Date;return{transactions:[],isLoading:!1,batch:{isActive:!1,isLoading:!1,progress:0,result:"",checkedTransactions:[],category:"",subcategory:""},search:{isActive:!1,query:"",currentDate:t,startDate:new Date(t.getFullYear(),t.getMonth(),t.getDate()-30),endDate:t,category:"",subcategory:""},modalTransaction:{isActive:!1,transaction:{}},rTransactions:this.$resource(this.url)}},computed:{displayedTransactions:function(){var t=this,a=this.search.query,e=this.search.startDate,s=this.search.endDate,i=this.search.category,r=this.search.subcategory,n=this.transactions;return n.map(function(a){return a.categoryLabel=a.category in t.categoriesAndSubcategoriesLookup?t.categoriesAndSubcategoriesLookup[a.category].label:null,a.subcategoryLabel=a.subcategory in t.categoriesAndSubcategoriesLookup?t.categoriesAndSubcategoriesLookup[a.subcategory].label:null,a.fullname=a.memo?a.memo+" "+a.name:a.name,a}),n.filter(function(t){return(t.note+t.fullname).toLowerCase().indexOf(a.toLowerCase())>-1&new Date(Date.parse(t.datePosted))>=e&new Date(Date.parse(t.datePosted))<=s&(!i||t.category===i)&(!r||t.subcategory===r)})},transactionsCheckedSum:function(){return this.batch.checkedTransactions.length>0?this.batch.checkedTransactions.reduce(function(t,a){return t+a.amount},0):0}},methods:{get:function(){var t=this;this.isLoading=!0,this.rTransactions.query({}).then(function(a){t.transactions=a.body},function(t){console.error(t)}).finally(function(){this.isLoading=!1})},edit:function(t){if(this.batch.isActive){var a=this.batch.checkedTransactions.indexOf(t);a>-1?this.batch.checkedTransactions.splice(a,1):this.batch.checkedTransactions.push(t)}else this.modalTransaction.transaction=t,this.modalTransaction.isActive=!0},processBatchUpdate:function(){var t=this,a=this.batch.checkedTransactions.length;a>0&&function(){t.batch.isLoading=!0,t.batch.progress=0;var e=0,s=t.batch.category,i=t.batch.subcategory;t.batch.result="";var r=function(r){s&&(r.category=s,i&&(r.subcategory=i)),t.rTransactions.update({id:r.id},r).then(function(t){},function(a){a.body.message?t.batch.result+=r.id+" : "+a.body.message+". ":t.batch.result+=r.id+" : "+a.status+" - "+a.statusText+". "}).finally(function(){e++,this.batch.progress=e/a,e===a&&(this.batch.isLoading=!1)})},n=!0,o=!1,l=void 0;try{for(var c,d=w()(t.batch.checkedTransactions);!(n=(c=d.next()).done);n=!0){r(c.value)}}catch(t){o=!0,l=t}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}}()},selectAll:function(){this.batch.checkedTransactions=this.displayedTransactions.slice()},selectNone:function(){this.batch.checkedTransactions=[]}},watch:{"search.category":function(){this.search.subcategory=""}},mounted:function(){var t=this;this.get(),this.getCategories(!0),n.$on("transactions-updated",function(){t.get()})}},N={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-collapse",{staticClass:"card",attrs:{open:t.search.isActive},on:{"update:open":function(a){t.$set(t.search,"isActive",a)}}},[e("div",{staticClass:"card-header",attrs:{slot:"trigger"},slot:"trigger"},[e("span",{staticClass:"card-header-icon"},[e("i",{staticClass:"fa",class:t.search.isActive?"fa-angle-down":"fa-angle-right"})]),t._v(" "),e("p",{staticClass:"card-header-title"},[t._v("Search transactions")])]),t._v(" "),e("div",{staticClass:"card-content"},[e("div",{staticClass:"field is-grouped is-grouped-multiline is-block-mobile"},[e("div",{staticClass:"control has-icons-left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search.query,expression:"search.query"}],staticClass:"input",attrs:{type:"text",placeholder:"Find a transaction"},domProps:{value:t.search.query},on:{input:function(a){a.target.composing||t.$set(t.search,"query",a.target.value)}}}),t._v(" "),e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fa fa-search"})])]),t._v(" "),e("div",{staticClass:"control"},[e("b-datepicker",{attrs:{placeholder:"Start date",icon:"calendar",editable:"","max-date":t.search.currentDate},model:{value:t.search.startDate,callback:function(a){t.$set(t.search,"startDate",a)},expression:"search.startDate"}})],1),t._v(" "),e("div",{staticClass:"control"},[e("b-datepicker",{attrs:{placeholder:"End date",icon:"calendar",editable:"","max-date":t.search.currentDate},model:{value:t.search.endDate,callback:function(a){t.$set(t.search,"endDate",a)},expression:"search.endDate"}})],1),t._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.search.category,expression:"search.category"}],attrs:{name:"parent"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.search,"category",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- Category --")]),t._v(" "),t._l(t.categories,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])})],2)])]),t._v(" "),t.search.category&&t.categoriesAndSubcategoriesLookup[t.search.category].sub.length>0?e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.search.subcategory,expression:"search.subcategory"}],attrs:{name:"parent"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.search,"subcategory",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- Subcategory --")]),t._v(" "),t._l(t.categoriesAndSubcategoriesLookup[t.search.category].sub,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])})],2)])]):t._e()])])]),t._v(" "),e("b-collapse",{staticClass:"card",attrs:{open:t.batch.isActive},on:{"update:open":function(a){t.$set(t.batch,"isActive",a)}}},[e("div",{staticClass:"card-header",attrs:{slot:"trigger"},slot:"trigger"},[e("span",{staticClass:"card-header-icon"},[e("i",{staticClass:"fa",class:t.batch.isActive?"fa-angle-down":"fa-angle-right"})]),t._v(" "),e("p",{staticClass:"card-header-title"},[t._v("Batch updates")])]),t._v(" "),e("div",{staticClass:"card-content"},[e("div",{staticClass:"field is-grouped is-grouped-multiline"},[e("div",{staticClass:"control"},[e("div",{staticClass:"input is-static"},[t._v(t._s(t.batch.checkedTransactions.length)+" transactions selected ("+t._s(t._f("currency")(t.transactionsCheckedSum))+")")])]),t._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.batch.category,expression:"batch.category"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.batch,"category",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- Category --")]),t._v(" "),t._l(t.categories,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])})],2)])]),t._v(" "),t.batch.category&&t.categoriesAndSubcategoriesLookup[t.batch.category].sub.length>0?e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.batch.subcategory,expression:"batch.subcategory"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.batch,"subcategory",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- Subcategory --")]),t._v(" "),t._l(t.categoriesAndSubcategoriesLookup[t.batch.category].sub,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])})],2)])]):t._e(),t._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button is-primary",class:{"is-loading":t.batch.isLoading},attrs:{disabled:t.batch.isLoading},on:{click:t.processBatchUpdate}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-cogs"})]),e("span",[t._v("Apply")])])]),t._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button is-light",attrs:{disabled:t.batch.isLoading},on:{click:t.selectAll}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-check-square-o"})]),e("span",[t._v("Select all")])])]),t._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button is-light",attrs:{disabled:t.batch.isLoading},on:{click:t.selectNone}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-square-o"})]),e("span",[t._v("Clear")])])])]),t._v(" "),e("div",{staticClass:"field is-block-mobile"},[e("progress",{staticClass:"progress",attrs:{max:"1"},domProps:{value:t.batch.progress}},[t._v(t._s(t.batch.progress)+" %")])]),t._v(" "),e("div",{staticClass:"field"},[t.batch.result?e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n            "+t._s(t.batch.result)+"\n          ")])]):t._e()])])]),t._v(" "),e("b-table",{attrs:{data:t.displayedTransactions,paginated:!0,striped:!0,hoverable:!0,loading:t.isLoading,"default-sort":"datePosted","default-sort-direction":"desc",checkable:t.batch.isActive,"checked-rows":t.batch.checkedTransactions},on:{select:t.edit,"update:checkedRows":function(a){t.$set(t.batch,"checkedTransactions",a)}},scopedSlots:t._u([{key:"default",fn:function(a){return[e("b-table-column",{attrs:{field:"amount",label:"Amount",sortable:"",numeric:""}},[e("span",{class:[a.row.amount<0?"has-text-danger":"has-text-primary"]},[t._v(t._s(t._f("currency")(a.row.amount)))])]),t._v(" "),e("b-table-column",{attrs:{field:"name",label:"Name",sortable:""}},[t._v("\n        "+t._s(a.row.fullname)),a.row.note?e("span",{staticClass:"has-text-grey"},[t._v(" | "+t._s(a.row.note))]):t._e()]),t._v(" "),e("b-table-column",{attrs:{field:"datePosted",label:"Date",sortable:""}},[t._v("\n        "+t._s(t._f("moment")(a.row.datePosted,"DD/MM/YYYY"))+"\n      ")]),t._v(" "),e("b-table-column",{attrs:{field:"category",label:"Category",sortable:""}},[t._v("\n        "+t._s(a.row.categoryLabel)),a.row.subcategory?e("span",[t._v(" / "+t._s(a.row.subcategoryLabel))]):t._e()])]}}])},[e("template",{slot:"empty"},[e("section",{staticClass:"section"},[e("div",{staticClass:"content has-text-grey has-text-centered"},[e("p",[t._v("There is nothing to display")])])])])],2),t._v(" "),e("b-modal",{attrs:{active:t.modalTransaction.isActive,"has-modal-card":"",scroll:"keep"},on:{"update:active":function(a){t.$set(t.modalTransaction,"isActive",a)}}},[e("transaction",{attrs:{transaction:t.modalTransaction.transaction,rTransactions:t.rTransactions}})],1)],1)},staticRenderFns:[]},S=e("VU/8")(L,N,!1,null,null,null).exports,I={name:"account",components:{Breadcrumb:h,Transactions:S},data:function(){return{account:{id:parseInt(this.$route.params.id),bankId:"",branchId:"",accountId:"",label:"",balance:0,transactions:[]},isLoading:!1,updatedAccount:{},maps:[],upload:{file:null,map:"",isUploading:!1,result:""},url:o+"accounts/"+parseInt(this.$route.params.id)+"/transactions{/id}",rAccounts:this.$resource(o+"accounts{/id}"),rMaps:this.$resource(o+"maps"),rDatasets:this.$resource(o+"accounts/"+parseInt(this.$route.params.id)+"/dataset")}},computed:{accountTitle:function(){return this.account.label?this.account.label:this.account.bankId+" "+this.account.branchId+" "+this.account.accountId}},methods:{get:function(){var t=this;this.isLoading=!0,this.rAccounts.get({id:this.account.id}).then(function(a){t.account.bankId=a.body.bankId,t.account.branchId=a.body.branchId,t.account.accountId=a.body.accountId,t.account.balance=a.body.balance,t.account.label=a.body.label,t.updatedAccount=JSON.parse(r()(t.account)),delete t.updatedAccount.transactions},function(a){403!==a.status&&404!==a.status?console.error(a):t.$router.replace({name:"home"})}).finally(function(){this.isLoading=!1})},validateUpdateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(a){a&&(t.isLoading=!0,t.rAccounts.update({id:t.account.id},t.updatedAccount).then(function(a){t.account.bankId=a.body.bankId,t.account.branchId=a.body.branchId,t.account.accountId=a.body.accountId,t.account.balance=a.body.balance,t.account.label=a.body.label},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1}))})},deleteAccount:function(){var t=this;this.$dialog.confirm({message:"Are you sure you want to delete this account?<br>All transactions will be deleted too.",title:"Deleting account",type:"is-danger",hasIcon:!0,icon:"trash",confirmText:"Delete account",focusOn:"cancel",onConfirm:function(){t.isLoading=!0,t.rAccounts.delete({id:t.account.id}).then(function(a){t.$router.replace({name:"accounts"})},function(t){console.error(t)}).finally(function(){this.isLoading=!1})}})},getMaps:function(){var t=this;localStorage.getItem("maps")?this.maps=JSON.parse(localStorage.getItem("maps")):this.rMaps.get().then(function(a){t.maps=a.body,localStorage.setItem("maps",r()(t.maps))},function(t){console.error(t)})},uploadDataset:function(){var t=this;this.upload.result="";var a=this.upload.file,e=new FormData;if(e.append("Content-Type",a.type||"application/octet-stream"),e.append("file",a),a.size>8e7)this.upload.result="File too big";else{var s={};if("application/json"===a.type){if(!this.upload.map)return void(this.upload.result="Map must be set for uploading a JSON file");s={map:this.upload.map}}this.upload.isUploading=!0,this.isLoading=!0,this.rDatasets.save(s,e).then(function(a){a.body.message&&(t.upload.result=a.body.message),n.$emit("transactions-updated",{})},function(a){a.body.message?t.upload.result=a.body.message:t.upload.result=a.status+" - "+a.statusText}).finally(function(){this.upload.isUploading=!1,this.isLoading=!1})}}},mounted:function(){this.get(),this.getMaps()}},P={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/accounts",icon:"fa-table",text:"Accounts"},{link:"/accounts",text:t.accountTitle,isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Account "+t._s(t.accountTitle))]),t._v(" "),e("b-tabs",{attrs:{type:"is-boxed",animated:!1}},[e("b-tab-item",{staticClass:"has-half-margin-mobile",attrs:{label:"Transactions",icon:"file-text-o"}},[e("transactions",{attrs:{url:t.url}}),t._v(" "),e("div",{staticClass:"field is-grouped"},[e("p",{staticClass:"control"},[e("b-field",{staticClass:"file"},[e("b-upload",{attrs:{disabled:t.upload.isUploading},on:{input:t.uploadDataset},model:{value:t.upload.file,callback:function(a){t.$set(t.upload,"file",a)},expression:"upload.file"}},[e("a",{staticClass:"button is-primary"},[e("b-icon",{attrs:{icon:"upload"}}),t._v(" "),e("span",[t._v("Upload OFX/JSON")])],1)]),t._v(" "),t.upload.file?e("span",{staticClass:"file-name"},[t._v("\n                  "+t._s(t.upload.file.name)+" ("+t._s(t.upload.file.size)+" bytes)\n                ")]):t._e()],1)],1),t._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.upload.map,expression:"upload.map"}],attrs:{name:"parent"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.upload,"map",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- JSON Map --")]),t._v(" "),t._l(t.maps,function(a){return e("option",{key:a.code,domProps:{value:a.code}},[t._v(t._s(a.label))])})],2)])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-body"},[t.upload.result?e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n                  "+t._s(t.upload.result)+"\n                ")])]):t._e()])])],1),t._v(" "),e("b-tab-item",{attrs:{label:"Edit",icon:"pencil"}},[e("form",{staticClass:"section is-max-width-form",attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateUpdateBeforeSubmit(a)}}},[e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v("Bank identifier")])]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.bankId,expression:"updatedAccount.bankId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("bankId")},attrs:{type:"text",name:"bankId",placeholder:"Bank Id","data-vv-as":"bank id"},domProps:{value:t.updatedAccount.bankId},on:{input:function(a){a.target.composing||t.$set(t.updatedAccount,"bankId",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("bankId"),expression:"errors.has('bankId')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("bankId")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v("Bank identifier")])]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("p",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.branchId,expression:"updatedAccount.branchId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("BranchId")},attrs:{type:"text",name:"BranchId",placeholder:"Branch Id","data-vv-as":"branch id"},domProps:{value:t.updatedAccount.branchId},on:{input:function(a){a.target.composing||t.$set(t.updatedAccount,"branchId",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("BranchId"),expression:"errors.has('BranchId')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("BranchId")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v("Account identifier")])]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.accountId,expression:"updatedAccount.accountId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("AccountId")},attrs:{type:"text",name:"AccountId",placeholder:"Account Id","data-vv-as":"account id"},domProps:{value:t.updatedAccount.accountId},on:{input:function(a){a.target.composing||t.$set(t.updatedAccount,"accountId",a.target.value)}}}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("AccountId"),expression:"errors.has('AccountId')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("AccountId")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v("Label")])]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.label,expression:"updatedAccount.label"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:"Label of your choice"},domProps:{value:t.updatedAccount.label},on:{input:function(a){a.target.composing||t.$set(t.updatedAccount,"label",a.target.value)}}}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("button",{staticClass:"button is-primary",attrs:{type:"submit",role:"button"}},[e("i",{staticClass:"fa fa-save"}),t._v(" Save")]),t._v(" "),e("button",{staticClass:"button is-danger",attrs:{type:"button",role:"button"},on:{click:t.deleteAccount}},[e("i",{staticClass:"fa fa-trash"}),t._v(" Delete")])])])])]),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading}})],1)],1)],1)])])},staticRenderFns:[]},j=e("VU/8")(I,P,!1,null,null,null).exports,D={data:function(){return{credentials:{login:"",password:""},isLoading:!1,error:""}},methods:{submit:function(t){t.preventDefault(),this.isLoading=!0;var a={login:this.credentials.login,password:this.credentials.password};this.errors.count()>0||""===a.login||""===a.password||l.login(this,a,this.$router.currentRoute.query.redirect)}}},q={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero is-light is-fullheight login"},[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container has-text-centered"},[e("div",{staticClass:"column is-4 is-offset-4"},[e("div",{staticClass:"box"},[e("form",[e("h3",{staticClass:"title has-text-grey"},[t._v("Login")]),t._v(" "),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Access to your money account")]),t._v(" "),e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.login,expression:"credentials.login"},{name:"validate",rawName:"v-validate",value:"required|min:3|alpha",expression:"'required|min:3|alpha'"}],staticClass:"input is-medium",class:{input:!0,"is-danger":t.errors.has("login")},attrs:{type:"text",name:"login",placeholder:"Login"},domProps:{value:t.credentials.login},on:{input:function(a){a.target.composing||t.$set(t.credentials,"login",a.target.value)}}}),t._v(" "),t._m(0),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("login")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"},{name:"validate",rawName:"v-validate",value:"required|min:5",expression:"'required|min:5'"}],staticClass:"input is-medium",class:{input:!0,"is-danger":t.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.credentials.password},on:{input:function(a){a.target.composing||t.$set(t.credentials,"password",a.target.value)}}}),t._v(" "),t._m(1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("password")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("button",{staticClass:"button is-block is-primary is-medium is-fullwidth",class:{"is-loading":t.isLoading},attrs:{disabled:t.isLoading},on:{click:t.submit}},[e("span",{staticClass:"fa fa-sign-in fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" Login")])]),t._v(" "),t.error?e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n                "+t._s(t.error)+"\n              ")])]):t._e()])])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-user"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-lock"})])}]};var T=e("VU/8")(D,q,!1,function(t){e("5xS1")},null,null).exports,E=e("GCDA"),U=e.n(E),z={props:{id:{type:Number,required:!0}},data:function(){return{connections:[],rConnections:this.$resource(o+"users/"+this.id+"/tokens")}},methods:{get:function(){var t=this;this.rConnections.query().then(function(a){t.connections=a.body;var e=new U.a;t.connections.forEach(function(t){e.setUA(t.userAgent);var a=e.getResult();t.browser=a.browser.name+" "+a.browser.major,t.os=a.os.name+" "+a.os.version,a.device.model&&(t.device=a.device.model)})},function(t){t.body.message?console.log(t.body.message):console.log(t.status+" - "+t.statusText)})}},mounted:function(){this.get()}},B={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-table",{attrs:{data:t.connections,"mobile-cards":!1,striped:!0,narrowed:"","default-sort":"creation","default-sort-direction":"desc"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("b-table-column",{attrs:{field:"creation",label:"Date",sortable:""}},[t._v("\n      "+t._s(t._f("moment")(a.row.creation,"DD/MM/YYYY HH:mm:ss"))+"\n    ")]),t._v(" "),e("b-table-column",{attrs:{field:"ip",label:"IP address",sortable:""}},[t._v("\n      "+t._s(a.row.ip)+"\n    ")]),t._v(" "),e("b-table-column",{attrs:{field:"userAgent",label:"User agent",sortable:"",title:a.row.userAgent}},[t._v("\n      "+t._s(a.row.browser)+" / "+t._s(a.row.os)),a.row.device?e("span",[t._v(" / "+t._s(a.row.device))]):t._e()])]}}])})},staticRenderFns:[]},F=e("VU/8")(z,B,!1,null,null,null).exports,M={name:"profile",components:{UserConnections:F,Breadcrumb:h},data:function(){return{user:l.getProfile(),password:"",error:"",isLoading:!1,rUsers:this.$resource(o+"users{/id}")}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(a){a&&(t.isLoading=!0,t.rUsers.update({id:t.user.id},{sub:t.user.id,login:t.user.login,password:t.password,mail:t.user.mail}).then(function(t){},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1}))})}}},O={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/profile",icon:"fa-user-circle",text:"Profile",isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Profile")]),t._v(" "),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Update your money account")]),t._v(" "),e("form",{staticClass:"section is-max-width-form",attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateBeforeSubmit(a)}}},[e("div",{staticClass:"field is-horizontal"},[t._m(0),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.login,expression:"user.login"},{name:"validate",rawName:"v-validate",value:"required|min:3|alpha",expression:"'required|min:3|alpha'"}],staticClass:"input",class:{input:!0,"is-danger":t.errors.has("login")},attrs:{type:"text",name:"login",placeholder:"Type your new login"},domProps:{value:t.user.login},on:{input:function(a){a.target.composing||t.$set(t.user,"login",a.target.value)}}}),t._v(" "),t._m(1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("login")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(2),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:5",expression:"'required|min:5'"}],staticClass:"input",class:{input:!0,"is-danger":t.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"Type your new password"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}}),t._v(" "),t._m(3),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("password")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(4),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.mail,expression:"user.mail"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"input",class:{input:!0,"is-danger":t.errors.has("mail")},attrs:{type:"email",name:"mail",placeholder:"Type your mail address"},domProps:{value:t.user.mail},on:{input:function(a){a.target.composing||t.$set(t.user,"mail",a.target.value)}}}),t._v(" "),t._m(5),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mail"),expression:"errors.has('mail')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mail"),expression:"errors.has('mail')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("mail")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field is-grouped"},[t._m(6),t._v(" "),e("div",{staticClass:"control"},[e("a",{staticClass:"button is-light",on:{click:function(a){t.$router.go(-1)}}},[e("span",{staticClass:"fa fa-ban fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" Cancel")])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),t._v(" "),e("div",{staticClass:"field-body"},[t.error?e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n                "+t._s(t.error)+"\n              ")])]):t._e()])]),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1),t._v(" "),e("user-connections",{attrs:{id:this.user.id}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Login")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-user"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("New password")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-lock"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Mail")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-envelope"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary"},[a("span",{staticClass:"fa fa-save fa-fw",attrs:{"aria-hidden":"true"}}),this._v(" Save")])])}]},R=e("VU/8")(M,O,!1,null,null,null).exports,H={props:["rPatterns","pattern"],mixins:[k],data:function(){return{error:"",matchingCount:null,rTransactions:this.$resource(o+"transactions"),isLoading:!1}},methods:{deletePattern:function(){var t=this;this.$dialog.confirm({message:"Are you sure you want to delete this pattern?",title:"Deleting pattern",type:"is-danger",hasIcon:!0,icon:"trash",confirmText:"Delete pattern",focusOn:"cancel",onConfirm:function(){t.isLoading=!0,t.rPatterns.delete({id:t.pattern.id}).then(function(a){t.$parent.close();var e=t.$parent.$parent.patterns,s=e.map(function(t){return t.id}).indexOf(t.pattern.id);e.splice(s,1)},function(a){t.isLoading=!1,a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText})}})},validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(a){if(a){if(t.isLoading=!0,!t.pattern.id)return void t.rPatterns.save(t.pattern).then(function(a){t.pattern.id=a.body.id,t.$parent.close()},function(a){t.isLoading=!1,a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText});t.rPatterns.update({id:t.pattern.id},t.pattern).then(function(a){t.$parent.close()},function(a){t.isLoading=!1,a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText})}})},count:function(){var t=this;this.pattern.label&&this.rTransactions.query({pattern:this.pattern.label}).then(function(a){t.matchingCount=a.body.length,console.log(a.body.length)},function(t){console.error(t)})}},watch:{"pattern.category":function(){this.pattern.subcategory=""}},mounted:function(){this.getCategories(!1)}},V={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("form",{attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateBeforeSubmit(a)}}},[e("div",{staticClass:"modal-card"},[t._m(0),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Label")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.pattern.label,expression:"pattern.label",modifiers:{lazy:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:"Transaction name to be find"},domProps:{value:t.pattern.label},on:{change:[function(a){t.$set(t.pattern,"label",a.target.value)},t.count]}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])]),t._v(" "),e("p",{staticClass:"help"},[t._v("Wildcard character * is allowed"),null!==t.matchingCount?e("span",[t._v(" - "+t._s(t.matchingCount)+" results")]):t._e()])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Category")]),t._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.pattern.category,expression:"pattern.category"}],attrs:{name:"parent"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.pattern,"category",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- Category --")]),t._v(" "),t._l(t.categories,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])})],2)])])]),t._v(" "),t.pattern.category&&t.categoriesAndSubcategoriesLookup[t.pattern.category]&&t.categoriesAndSubcategoriesLookup[t.pattern.category].sub.length>0?e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Subcategory")]),t._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.pattern.subcategory,expression:"pattern.subcategory"}],attrs:{name:"parent"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.pattern,"subcategory",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- Subcategory --")]),t._v(" "),t._l(t.categoriesAndSubcategoriesLookup[t.pattern.category].sub,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])})],2)])])]):t._e(),t._v(" "),t.error?e("div",{staticClass:"message is-danger block"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e()]),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[t._m(1),t._v(" "),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(a){t.$parent.close()}}},[t._v("Cancel")]),t._v(" "),t.pattern.id?e("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.deletePattern}},[t._m(2),e("span",[t._v("Delete")])]):t._e()]),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[this._v("Pattern")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"button is-primary"},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-save"})]),a("span",[this._v("Save")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-trash"})])}]},Y={name:"patterns",components:{TransactionPattern:e("VU/8")(H,V,!1,null,null,null).exports,Breadcrumb:h},mixins:[k],data:function(){return{patterns:[],suggestedPatterns:[],error:"",isLoading:!1,modalPattern:{isActive:!1,pattern:{}},rPatterns:this.$resource(o+"patterns{/id}"),rTransactionsPatterns:this.$resource(o+"transactions/patterns")}},methods:{get:function(){var t=this;this.isLoading=!0,this.rPatterns.query().then(function(a){t.patterns=a.body},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})},create:function(){var t={label:"",category:"",subcategory:""};this.patterns.push(t),this.modalPattern.pattern=t,this.modalPattern.isActive=!0},edit:function(t){this.modalPattern.pattern=t,this.modalPattern.isActive=!0},suggest:function(){var t=this;this.isLoading=!0,this.rTransactionsPatterns.query().then(function(a){t.suggestedPatterns=a.body},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})},createSuggested:function(t){var a=JSON.parse(r()(t));this.patterns.push(a),this.edit(a)}},mounted:function(){this.get(),this.getCategories()}},J={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/patterns",icon:"fa-magic",text:"Patterns",isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Patterns")]),t._v(" "),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Automatic categorization")]),t._v(" "),e("b-table",{staticClass:"table-container",attrs:{data:t.patterns,striped:!0,hoverable:!0},on:{select:t.edit},scopedSlots:t._u([{key:"default",fn:function(a){return[e("b-table-column",{attrs:{label:"Label"}},[t._v("\n            "+t._s(a.row.label)+"\n          ")]),t._v(" "),e("b-table-column",{attrs:{label:"Category"}},[a.row.category&&t.categoriesAndSubcategoriesLookup[a.row.category]?e("span",[t._v(t._s(t.categoriesAndSubcategoriesLookup[a.row.category].label))]):t._e()]),t._v(" "),e("b-table-column",{attrs:{label:"Subcategory"}},[a.row.subcategory&&t.categoriesAndSubcategoriesLookup[a.row.subcategory]?e("span",[t._v(t._s(t.categoriesAndSubcategoriesLookup[a.row.subcategory].label))]):t._e()])]}}])}),t._v(" "),e("div",{staticClass:"field is-grouped"},[e("p",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{role:"button"},on:{click:t.create}},[t._m(0),e("span",[t._v("Add pattern")])])]),t._v(" "),e("p",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{role:"button"},on:{click:t.suggest}},[t._m(1),e("span",[t._v("Suggest patterns")])])])]),t._v(" "),t.error?e("div",{staticClass:"message is-danger block"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e(),t._v(" "),e("b-table",{staticClass:"table-container",attrs:{data:t.suggestedPatterns,striped:!0,hoverable:!0},on:{select:t.createSuggested},scopedSlots:t._u([{key:"default",fn:function(a){return[e("b-table-column",{attrs:{label:"Label"}},[t._v("\n            "+t._s(a.row.label)+"\n          ")]),t._v(" "),e("b-table-column",{attrs:{label:"Category"}},[a.row.category&&t.categoriesAndSubcategoriesLookup[a.row.category]?e("span",[t._v(t._s(t.categoriesAndSubcategoriesLookup[a.row.category].label))]):t._e()]),t._v(" "),e("b-table-column",{attrs:{label:"Subcategory"}},[a.row.subcategory&&t.categoriesAndSubcategoriesLookup[a.row.subcategory]?e("span",[t._v(t._s(t.categoriesAndSubcategoriesLookup[a.row.subcategory].label))]):t._e()]),t._v(" "),e("b-table-column",{attrs:{label:"Occurences"}},[t._v("\n            "+t._s(a.row.count)+"\n          ")])]}}])}),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)]),t._v(" "),e("b-modal",{attrs:{active:t.modalPattern.isActive,"has-modal-card":"",scroll:"keep"},on:{"update:active":function(a){t.$set(t.modalPattern,"isActive",a)}}},[e("transaction-pattern",{attrs:{pattern:t.modalPattern.pattern,rPatterns:t.rPatterns}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-plus"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-cogs"})])}]},X=e("VU/8")(Y,J,!1,null,null,null).exports,W={props:["user"],components:{UserConnections:F},data:function(){return{error:"",isLoading:!1,action:"",rUsers:this.$resource(o+"users{/id}")}},computed:{isAdmin:{get:function(){return this.user.scope.includes("admin")},set:function(t){var a=this.user.scope.split(" ").filter(function(t,a,e){return"admin"!==t});t&&a.push("admin"),this.user.scope=a.join(" ")}}},methods:{validateBeforeSubmit:function(){var t=this;this.error=null,this.$validator.validateAll().then(function(a){if(a){if(t.isLoading=!0,!t.user.sub)return void t.rUsers.save(t.user).then(function(a){t.$parent.close()},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1});t.rUsers.update({id:t.user.sub},t.user).then(function(a){t.$parent.close()},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})}})}},mounted:function(){this.action=this.user.sub?"Update":"Create"}},G={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("form",{attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateBeforeSubmit(a)}}},[e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.action)+" user")])]),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Login")]),t._v(" "),e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.login,expression:"user.login"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("login")},attrs:{type:"text",name:"login",placeholder:"Login"},domProps:{value:t.user.login},on:{input:function(a){a.target.composing||t.$set(t.user,"login",a.target.value)}}}),t._v(" "),t._m(0),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("login")))])])]),t._v(" "),t.user.sub?t._e():e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Password")]),t._v(" "),e("div",{staticClass:"control has-icons-left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(a){a.target.composing||t.$set(t.user,"password",a.target.value)}}}),t._v(" "),t._m(1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("password")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Mail")]),t._v(" "),e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.mail,expression:"user.mail"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"input",class:{"is-danger":t.errors.has("mail")},attrs:{type:"email",name:"mail",placeholder:"Mail address"},domProps:{value:t.user.mail},on:{input:function(a){a.target.composing||t.$set(t.user,"mail",a.target.value)}}}),t._v(" "),t._m(2),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mail"),expression:"errors.has('mail')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mail"),expression:"errors.has('mail')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("mail")))])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Status")]),t._v(" "),e("div",{staticClass:"control"},[e("b-switch",{model:{value:t.user.status,callback:function(a){t.$set(t.user,"status",a)},expression:"user.status"}})],1)]),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Admin")]),t._v(" "),e("div",{staticClass:"control"},[e("b-switch",{model:{value:t.isAdmin,callback:function(a){t.isAdmin=a},expression:"isAdmin"}})],1)]),t._v(" "),t.error?e("div",{staticClass:"message is-danger block"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e(),t._v(" "),e("user-connections",{attrs:{id:this.user.sub}})],1),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button is-primary"},[t._v(t._s(t.action))]),t._v(" "),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(a){t.$parent.close()}}},[t._v("Cancel")])]),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-user"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-lock"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-envelope"})])}]},K={name:"users",components:{Breadcrumb:h,UserForm:e("VU/8")(W,G,!1,null,null,null).exports},data:function(){return{users:[],error:"",isLoading:!1,modalUser:{isActive:!1,user:{}},rUsers:this.$resource(o+"users{/id}")}},computed:{displayedUsers:function(){return this.users.slice().map(function(t){return t.isAdmin=t.scope.includes("admin"),t})}},methods:{get:function(){var t=this;this.isLoading=!0,this.rUsers.query().then(function(a){t.users=a.body},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})},create:function(){this.modalUser.user={scope:"user",status:!0},this.modalUser.isActive=!0},edit:function(t){this.modalUser.user=JSON.parse(r()(t)),delete this.modalUser.user.isAdmin,this.modalUser.isActive=!0}},mounted:function(){this.get()}},Q={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/users",icon:"fa-users",text:"Users",isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Users")]),t._v(" "),e("b-table",{staticClass:"table-container",attrs:{data:t.displayedUsers,striped:!0,hoverable:!0},on:{select:t.edit},scopedSlots:t._u([{key:"default",fn:function(a){return[e("b-table-column",{attrs:{label:"Login"}},[t._v("\n            "+t._s(a.row.login)+"\n          ")]),t._v(" "),e("b-table-column",{attrs:{label:"Mail"}},[t._v("\n              "+t._s(a.row.mail)+"\n            ")]),t._v(" "),e("b-table-column",{attrs:{label:"Admin"}},[e("b-switch",{attrs:{disabled:""},model:{value:a.row.isAdmin,callback:function(e){t.$set(a.row,"isAdmin",e)},expression:"props.row.isAdmin"}})],1),t._v(" "),e("b-table-column",{attrs:{label:"Status"}},[e("b-switch",{attrs:{disabled:""},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"props.row.status"}})],1)]}}])}),t._v(" "),e("div",{staticClass:"field is-grouped"},[e("p",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{role:"button"},on:{click:t.create}},[e("i",{staticClass:"fa fa-user-plus"}),t._v(" Add user")])])]),t._v(" "),t.error?e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e(),t._v(" "),e("b-modal",{attrs:{active:t.modalUser.isActive,"has-modal-card":"",scroll:"keep"},on:{"update:active":function(a){t.$set(t.modalUser,"isActive",a)},close:t.get}},[e("user-form",t._b({},"user-form",t.modalUser,!1))],1),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])])},staticRenderFns:[]},Z=e("VU/8")(K,Q,!1,null,null,null).exports,tt={name:"category",components:{Breadcrumb:h,"icon-picker":e("+U1x").fontAwesomePicker},props:["isCategory"],data:function(){return{rCategories:this.$resource(o+"categories{/id}"),category:{id:parseInt(this.$route.params.id),status:!0},parentCategories:[],isIconPickerDisplayed:!1,breadcrumbItems:[],isLoading:!1,error:null}},methods:{get:function(){var t=this;this.isLoading=!0,this.rCategories.get({id:this.category.id}).then(function(a){t.category=a.body,t.updateBreadcrumbItems()},function(t){console.error(t)}).finally(function(){this.isLoading=!1})},updateBreadcrumbItems:function(){var t=this,a=this.breadcrumbItems.slice(),e=2;if(!this.isCategory&&(e=3,this.category.parentId)){var s=this.category.parentId;if(this.parentCategories.length>0){var i=this.parentCategories.filter(function(a){return a.id===parseInt(t.category.parentId)});i.length>0&&(s=i[0].label,a[e-1]={link:{name:"category",params:{id:this.category.parentId}},text:s})}}this.category.label&&(a[e]={link:"/categories",text:this.category.label,isActive:!0}),this.breadcrumbItems=a.slice()},getParentCategories:function(){var t=this;if(localStorage.getItem("categories"))return this.parentCategories=JSON.parse(localStorage.getItem("categories")),void this.updateBreadcrumbItems();this.rCategories.query({status:"all"}).then(function(a){t.parentCategories=a.body,t.updateBreadcrumbItems()},function(t){console.error(t)})},toggleIconPicker:function(){this.isIconPickerDisplayed=!this.isIconPickerDisplayed},setIcon:function(t){this.category.icon=t.className,this.toggleIconPicker()},validateBeforeSubmit:function(){var t=this;this.error=null,this.$validator.validateAll().then(function(a){if(a){if(t.isLoading=!0,!t.category.id)return void t.rCategories.save(t.category).then(function(a){localStorage.removeItem("categoriesActives"),localStorage.removeItem("categories"),t.$router.replace({name:"categories"})},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1});t.rCategories.update({id:t.category.id},t.category).then(function(a){localStorage.removeItem("categoriesActives"),localStorage.removeItem("categories"),t.$router.replace({name:"categories"})},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})}})}},mounted:function(){this.breadcrumbItems=[{link:"/",icon:"fa-home",text:"Home"},{link:"/categories",icon:"fa-folder-open-o",text:"Categories"}],this.category.id&&this.get(),this.isCategory?this.category.icon||(this.category.icon="fa-question"):(this.category.parentId=parseInt(this.$route.params.pid),this.getParentCategories())}},at={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:this.breadcrumbItems},on:{"update:items":function(a){t.$set(this,"breadcrumbItems",a)}}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Category")]),t._v(" "),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Edit category")]),t._v(" "),e("form",{staticClass:"section is-max-width-form",attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateBeforeSubmit(a)}}},[e("div",{staticClass:"field is-horizontal"},[t._m(0),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.category.label,expression:"category.label"},{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:"Type a short description"},domProps:{value:t.category.label},on:{input:function(a){a.target.composing||t.$set(t.category,"label",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])])])])]),t._v(" "),t.isCategory?t._e():e("div",{staticClass:"field is-horizontal"},[t._m(1),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category.parentId,expression:"category.parentId"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-danger":t.errors.has("label")},attrs:{name:"parent"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.category,"parentId",a.target.multiple?e:e[0])}}},t._l(t.parentCategories,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.label))])}))])])])])]),t._v(" "),t.isCategory?e("div",{staticClass:"field is-horizontal"},[t._m(2),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isIconPickerDisplayed,expression:"!isIconPickerDisplayed"}],staticClass:"button",on:{click:t.toggleIconPicker}},[e("i",{staticClass:"fa fa-fw",class:t.category.icon})]),t._v(" "),e("icon-picker",{directives:[{name:"show",rawName:"v-show",value:t.isIconPickerDisplayed,expression:"isIconPickerDisplayed"}],on:{selectIcon:t.setIcon}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.category.icon,expression:"!category.icon"}],staticClass:"help is-danger"},[t._v("Icon is required.")])],1)])])]):t._e(),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(3),t._v(" "),e("div",{staticClass:"field-body"},[e("b-switch",{model:{value:t.category.status,callback:function(a){t.$set(t.category,"status",a)},expression:"category.status"}},[t._v(t._s(t.category.status?"Active":"Disabled"))])],1)]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field is-grouped"},[t._m(4),t._v(" "),e("div",{staticClass:"control"},[e("a",{staticClass:"button is-light",on:{click:function(a){t.$router.go(-1)}}},[e("span",{staticClass:"fa fa-ban fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" Cancel")])])])])]),t._v(" "),t.error?e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n                "+t._s(t.error)+"\n              ")])])])]):t._e(),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Label")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Parent")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Icon")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label"},[a("label",{staticClass:"label"},[this._v("Status")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary"},[a("span",{staticClass:"fa fa-save fa-fw",attrs:{"aria-hidden":"true"}}),this._v(" Save")])])}]},et=e("VU/8")(tt,at,!1,null,null,null).exports,st={name:"categories",components:{Breadcrumb:h,Category:et},data:function(){return{rCategories:this.$resource(o+"categories{/id}"),categories:[],isLoading:!1}},methods:{get:function(){var t=this;this.isLoading=!0,this.rCategories.query({status:"all"}).then(function(a){t.categories=a.body,localStorage.setItem("categories",r()(t.categories))},function(t){console.error(t)}).finally(function(){this.isLoading=!1})}},mounted:function(){this.get()}},it={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/categories",icon:"fa-folder-open-o",text:"Categories",isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Categories")]),t._v(" "),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Click to edit category or subcategory or add new one")]),t._v(" "),e("ul",{staticClass:"menu-list"},[t._l(t.categories,function(a){return e("li",{key:a.id,class:{"item-disabled":!a.status}},[e("router-link",{attrs:{to:{name:"category",params:{id:a.id}}}},[e("i",{staticClass:"fa fa-fw",class:a.icon}),t._v(" "+t._s(a.label))]),t._v(" "),e("ul",[t._l(a.sub,function(s){return e("li",{key:s.id,class:{"item-disabled":!s.status}},[e("router-link",{attrs:{to:{name:"subcategory",params:{id:s.id,pid:a.id}}}},[t._v(t._s(s.label))])],1)}),t._v(" "),e("li",[e("router-link",{staticClass:"has-text-grey-light",attrs:{to:{name:"subcategory",params:{id:"new",pid:a.id}}}},[e("i",{staticClass:"fa fa-fw fa-plus-square-o"}),t._v("Add a subcategory")])],1)],2)],1)}),t._v(" "),e("li",[e("router-link",{staticClass:"has-text-grey-light",attrs:{to:{name:"category",params:{id:"new"}}}},[e("i",{staticClass:"fa fa-fw fa-plus-square-o"}),t._v("Add a category")])],1)],2),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])])},staticRenderFns:[]};var rt=e("VU/8")(st,it,!1,function(t){e("o/R/")},"data-v-dd5f92a4",null).exports,nt={name:"mappings",components:{Breadcrumb:h},data:function(){return{rMaps:this.$resource(o+"maps{/id}"),maps:[],isLoading:!1}},methods:{get:function(){var t=this;this.isLoading=!0,this.rMaps.query({}).then(function(a){t.maps=a.body,localStorage.setItem("maps",r()(t.maps))},function(t){console.error(t)}).finally(function(){this.isLoading=!1})}},mounted:function(){this.get()}},ot={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/maps",icon:"fa-random",text:"Transaction mappings",isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Transaction mappings")]),t._v(" "),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Click to edit transaction mapping or add new one")]),t._v(" "),e("ul",{staticClass:"menu-list"},[t._l(t.maps,function(a){return e("li",{key:a.code},[e("router-link",{attrs:{to:{name:"map",params:{code:a.code}}}},[t._v(t._s(a.label))])],1)}),t._v(" "),e("li",[e("router-link",{staticClass:"has-text-grey-light",attrs:{to:{name:"newMap"}}},[e("i",{staticClass:"fa fa-fw fa-plus-square-o"}),t._v("Add a map")])],1)],2),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])])},staticRenderFns:[]},lt=e("VU/8")(nt,ot,!1,null,null,null).exports,ct={name:"mapping",components:{Breadcrumb:h},props:["isNew"],data:function(){return{rMaps:this.$resource(o+"maps{/code}"),map:{code:this.$route.params.code,label:"",dateFormat:"Y-m-d",attributes:{datePosted:"",fitid:"",memo:"",dateUser:"",name:"",amount:""}},isLoading:!1,error:null}},methods:{get:function(){var t=this;this.isLoading=!0,this.rMaps.get({code:this.$route.params.code}).then(function(a){t.map=a.body},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})},deleteMap:function(){var t=this;this.$dialog.confirm({message:"Are you sure you want to delete this mapping?",title:"Deleting mapping",type:"is-danger",hasIcon:!0,icon:"trash",confirmText:"Delete mapping",focusOn:"cancel",onConfirm:function(){t.isLoading=!0,t.rMaps.delete({code:t.$route.params.code}).then(function(a){localStorage.removeItem("maps"),t.$router.replace({name:"maps"})},function(a){t.isLoading=!1,a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText})}})},validateBeforeSubmit:function(){var t=this;this.error=null,this.$validator.validateAll().then(function(a){if(a){if(t.isLoading=!0,t.isNew)return void t.rMaps.save(t.map).then(function(a){localStorage.removeItem("maps"),t.$router.replace({name:"maps"})},function(a){t.isLoading=!1,a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText});t.rMaps.update({code:t.$route.params.code},t.map).then(function(a){localStorage.removeItem("maps"),t.$router.replace({name:"maps"})},function(a){t.isLoading=!1,a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText})}})}},mounted:function(){this.isNew||this.get()}},dt={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/maps",icon:"fa-random",text:"Transaction mappings"},{link:"/maps",text:this.map.label,isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("Transaction mapping")]),t._v(" "),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Edit Map")]),t._v(" "),e("form",{staticClass:"section is-max-width-form",attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateBeforeSubmit(a)}}},[e("div",{staticClass:"field is-horizontal"},[t._m(0),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.code,expression:"map.code"},{name:"validate",rawName:"v-validate",value:"required|alpha|min:2|max:10|is_not:new",expression:"'required|alpha|min:2|max:10|is_not:new'"}],staticClass:"input",class:{"is-danger":t.errors.has("code")},attrs:{type:"text",name:"code",placeholder:"Type a code",disabled:!t.isNew},domProps:{value:t.map.code},on:{input:function(a){a.target.composing||t.$set(t.map,"code",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("code"),expression:"errors.has('code')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("code"),expression:"errors.has('code')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("code")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(1),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.label,expression:"map.label"},{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:"Type the JSON attribute"},domProps:{value:t.map.label},on:{input:function(a){a.target.composing||t.$set(t.map,"label",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(2),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.dateFormat,expression:"map.dateFormat"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input",class:{"is-danger":t.errors.has("dateFormat")},attrs:{type:"text",name:"dateFormat",placeholder:"Type the provided date format (Y-m-d)"},domProps:{value:t.map.dateFormat},on:{input:function(a){a.target.composing||t.$set(t.map,"dateFormat",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("dateFormat"),expression:"errors.has('dateFormat')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("dateFormat"),expression:"errors.has('dateFormat')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("dateFormat")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(3),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.attributes.fitid,expression:"map.attributes.fitid"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("fitid")},attrs:{type:"text",name:"fitid",placeholder:"Type the JSON attribute"},domProps:{value:t.map.attributes.fitid},on:{input:function(a){a.target.composing||t.$set(t.map.attributes,"fitid",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("fitid"),expression:"errors.has('fitid')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("fitid"),expression:"errors.has('fitid')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("fitid")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(4),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.attributes.name,expression:"map.attributes.name"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("name")},attrs:{type:"text",name:"name",placeholder:"Type the JSON attribute"},domProps:{value:t.map.attributes.name},on:{input:function(a){a.target.composing||t.$set(t.map.attributes,"name",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("name")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(5),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.attributes.memo,expression:"map.attributes.memo"},{name:"validate",rawName:"v-validate",value:"alpha_num",expression:"'alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("memo")},attrs:{type:"text",name:"memo",placeholder:"Type the JSON attribute"},domProps:{value:t.map.attributes.memo},on:{input:function(a){a.target.composing||t.$set(t.map.attributes,"memo",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("memo"),expression:"errors.has('memo')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("memo"),expression:"errors.has('memo')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("memo")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(6),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.attributes.amount,expression:"map.attributes.amount"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("amount")},attrs:{type:"text",name:"amount",placeholder:"Type the JSON attribute"},domProps:{value:t.map.attributes.amount},on:{input:function(a){a.target.composing||t.$set(t.map.attributes,"amount",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("amount"),expression:"errors.has('amount')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("amount"),expression:"errors.has('amount')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("amount")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(7),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.attributes.datePosted,expression:"map.attributes.datePosted"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("datePosted")},attrs:{type:"text",name:"datePosted",placeholder:"Type the JSON attribute"},domProps:{value:t.map.attributes.datePosted},on:{input:function(a){a.target.composing||t.$set(t.map.attributes,"datePosted",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("datePosted"),expression:"errors.has('datePosted')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("datePosted"),expression:"errors.has('datePosted')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("datePosted")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(8),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.map.attributes.dateUser,expression:"map.attributes.dateUser"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("dateUser")},attrs:{type:"text",name:"dateUser",placeholder:"Type the JSON attribute"},domProps:{value:t.map.attributes.dateUser},on:{input:function(a){a.target.composing||t.$set(t.map.attributes,"dateUser",a.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("dateUser"),expression:"errors.has('dateUser')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("dateUser"),expression:"errors.has('dateUser')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("dateUser")))])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field is-grouped"},[t._m(9),t._v(" "),e("div",{staticClass:"control"},[e("a",{staticClass:"button is-light",on:{click:function(a){t.$router.go(-1)}}},[e("span",{staticClass:"fa fa-ban fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" Cancel")])]),t._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button is-danger",attrs:{type:"button",role:"button"},on:{click:t.deleteMap}},[e("i",{staticClass:"fa fa-trash"}),t._v(" Delete")])])])])]),t._v(" "),t.error?e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n                "+t._s(t.error)+"\n              ")])])])]):t._e(),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Code")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Label")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Date format")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Transaction id")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Name")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Memo")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Amount")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Date posted")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[this._v("Date user")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary"},[a("span",{staticClass:"fa fa-save fa-fw",attrs:{"aria-hidden":"true"}}),this._v(" Save")])])}]},ut=e("VU/8")(ct,dt,!1,null,null,null).exports,vt=e("UlOv"),mt=vt.c.reactiveProp,pt={extends:vt.a,mixins:[mt],props:{chartData:{type:Object,required:!0},chartLabels:{type:Array,required:!1}},data:function(){return{options:{legend:{display:!0},responsive:!0,maintainAspectRatio:!1,elements:{}}}},mounted:function(){this.renderChart(this.chartData,this.options)}},ht={components:{Doughnut:e("VU/8")(pt,null,!1,null,null,null).exports},mixins:[k],props:{title:{type:String,required:!0},chartEndpoint:{type:String,required:!0}},data:function(){var t=new Date;return{isLoading:!1,isLoaded:!1,chartData:null,search:{currentDate:t,periodStart:new Date(t.getFullYear(),t.getMonth(),t.getDate()-30),periodEnd:t}}},methods:{requestData:function(){var t=this;this.isLoading=!0;var a={params:{periodStart:this.$moment(this.search.periodStart).format("X"),periodEnd:this.$moment(this.search.periodEnd).format("X")}};this.$http.get(o+this.chartEndpoint,a).then(function(a){var e=a.data.values,s=["#42b983","#292f36","#4ecdc4","#0b3954","#ff6663","#7d7c84","#7180ac","#2b4570","#c84630","#81a684","#466060","#c9cba3","#e26d5c","#2a4747","#157a6e","#ee6c4d"],i=e.length,r=void 0;if("debit"===a.data.type){s=[];for(var n=0;n<i;n++)r=61+n/i*39,s.push("hsla(348, 100%, "+r+"%, 1)")}else if("credit"===a.data.type){s=[];for(var o=0;o<i;o++)r=49+o/i*41,s.push("hsla(153, 47%, "+r+"%, 1)")}t.chartData={datasets:[{backgroundColor:s,data:e.map(function(t){return t.amount})}]};var l=void 0;l="categories"===a.data.key?e.map(function(a){return t.categoriesAndSubcategoriesLookup[a.key]?t.categoriesAndSubcategoriesLookup[a.key].label:a.key}):e.map(function(t){return t.key}),t.chartData.labels=l,t.search.periodStart=t.$moment(a.data.periodStart).toDate(),t.search.periodEnd=t.$moment(a.data.periodEnd).toDate(),t.isLoading=!1,t.isLoaded=!0},function(t){t.body.message?console.log(t.body.message):console.log(t.status+" - "+t.statusText)})}},mounted:function(){this.requestData(),this.getCategories(!0)}},ft={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.isLoaded?e("div",{staticClass:"box"},[e("p",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),e("div",{staticClass:"field is-grouped is-grouped-multiline is-block-mobile"},[e("div",{staticClass:"control"},[e("b-datepicker",{attrs:{placeholder:"Start date",icon:"calendar",editable:"","max-date":t.search.currentDate,required:"",disabled:t.isLoading},model:{value:t.search.periodStart,callback:function(a){t.$set(t.search,"periodStart",a)},expression:"search.periodStart"}})],1),t._v(" "),e("div",{staticClass:"control"},[e("b-datepicker",{attrs:{placeholder:"End date",icon:"calendar",editable:"","max-date":t.search.currentDate,required:"",disabled:t.isLoading},model:{value:t.search.periodEnd,callback:function(a){t.$set(t.search,"periodEnd",a)},expression:"search.periodEnd"}})],1),t._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button",class:{"is-loading":t.isLoading},attrs:{disabled:t.isLoading},on:{click:t.requestData}},[t._m(0),e("span",[t._v("Refresh")])])])]),t._v(" "),e("doughnut",{attrs:{chartData:t.chartData}})],1):t._e()},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-refresh"})])}]},gt=e("VU/8")(ht,ft,!1,null,null,null).exports,bt=vt.c.reactiveProp,_t={extends:vt.b,mixins:[bt],props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,required:!1,default:function(){return{legend:{display:!1},maintainAspectRatio:!1,spanGaps:!1,elements:{line:{tension:1e-6}},plugins:{filler:{propagate:!1}},scales:{xAxes:[{type:"time",time:{displayFormats:{quarter:"MMM YYYY"},unit:"week",unitStepSize:1},ticks:{autoSkip:!1,maxRotation:0}}]}}}}},mounted:function(){this.renderChart(this.chartData,this.chartOptions)}},Ct={components:{LineChart:e("VU/8")(_t,null,!1,null,null,null).exports},props:{title:{type:String,required:!0},chartEndpoint:{type:String,required:!0}},data:function(){var t=new Date;return{isLoading:!1,isLoaded:!1,chartData:null,search:{currentDate:t,periodStart:new Date(t.getFullYear(),t.getMonth(),t.getDate()-30),periodEnd:t}}},methods:{requestData:function(){var t=this;this.isLoading=!0;var a={params:{periodStart:this.$moment(this.search.periodStart).format("X"),periodEnd:this.$moment(this.search.periodEnd).format("X")}};this.$http.get(o+this.chartEndpoint,a).then(function(a){t.chartData={datasets:[{data:a.data.values.map(function(t){return t.debit}),label:"Debits",backgroundColor:"rgba(255, 99, 132, 0.5)",borderColor:"rgb(255, 99, 132)",pointBackgroundColor:"rgba(255, 99, 132, 0.8)"},{data:a.data.values.map(function(t){return t.credit}),label:"Credits",backgroundColor:"rgba(66, 185, 131, 0.5)",borderColor:"rgb(66, 185, 131)",pointBackgroundColor:"rgba(66, 185, 131, 0.8)"}],labels:a.data.values.map(function(a){return t.$moment(a.date)})},t.search.periodStart=t.$moment(a.data.periodStart).toDate(),t.search.periodEnd=t.$moment(a.data.periodEnd).toDate(),t.isLoading=!1,t.isLoaded=!0},function(t){t.body.message?console.log(t.body.message):console.log(t.status+" - "+t.statusText)})}},mounted:function(){this.requestData()}},yt={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.isLoaded?e("div",{staticClass:"box"},[e("p",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),e("div",{staticClass:"field is-grouped is-grouped-multiline is-block-mobile"},[e("div",{staticClass:"control"},[e("b-datepicker",{attrs:{placeholder:"Start date",icon:"calendar",editable:"","max-date":t.search.currentDate,required:"",disabled:t.isLoading},model:{value:t.search.periodStart,callback:function(a){t.$set(t.search,"periodStart",a)},expression:"search.periodStart"}})],1),t._v(" "),e("div",{staticClass:"control"},[e("b-datepicker",{attrs:{placeholder:"End date",icon:"calendar",editable:"","max-date":t.search.currentDate,required:"",disabled:t.isLoading},model:{value:t.search.periodEnd,callback:function(a){t.$set(t.search,"periodEnd",a)},expression:"search.periodEnd"}})],1),t._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button",class:{"is-loading":t.isLoading},attrs:{disabled:t.isLoading},on:{click:t.requestData}},[t._m(0),e("span",[t._v("Refresh")])])])]),t._v(" "),e("line-chart",{attrs:{chartData:t.chartData}})],1):t._e()},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-refresh"})])}]},wt={name:"home",components:{Breadcrumb:h,TransactionsDistributionChart:gt,TransactionsHistoryChart:e("VU/8")(Ct,yt,!1,null,null,null).exports,Transactions:S},data:function(){return{url:o+"transactions{/id}"}}},xt={render:function(){var t=this.$createElement,a=this._self._c||t;return a("section",{staticClass:"hero"},[a("div",{staticClass:"hero-head"},[a("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home",isActive:!0}]}})],1),this._v(" "),a("div",{staticClass:"hero-body"},[a("div",{staticClass:"section"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-full"},[a("transactions-history-chart",{attrs:{title:"Transactions by day",chartEndpoint:"transactions/history"}})],1),this._v(" "),a("div",{staticClass:"column is-one-half-desktop"},[a("transactions-distribution-chart",{attrs:{title:"Credit by categories",chartEndpoint:"transactions/distribution/credit/categories"}})],1),this._v(" "),a("div",{staticClass:"column is-one-half-desktop"},[a("transactions-distribution-chart",{attrs:{title:"Debit by categories",chartEndpoint:"transactions/distribution/debit/categories"}})],1)])])]),this._v(" "),a("div",{staticClass:"container box"},[a("h1",{staticClass:"title"},[this._v("Transactions")]),this._v(" "),a("transactions",{attrs:{url:this.url}})],1)])])},staticRenderFns:[]},kt=e("VU/8")(wt,xt,!1,null,null,null).exports,$t={name:"setup",data:function(){return{currentStep:null,steps:[],error:"",isLoading:!1,rSteps:this.$resource(o+"setup/steps{/code}"),rFields:this.$resource(o+"setup/steps{/code}/fields")}},methods:{getSteps:function(){var t=this;this.isLoading=!0,this.rSteps.query().then(function(a){t.steps=a.body,t.setStep(t.steps.findIndex(function(t){return t.isActive}))},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})},setStep:function(t){(t<0||t>=this.steps.length)&&(t=0),this.steps.map(function(t){return t.isActive=!1,t}),this.steps.length&&(this.steps[t].isActive=!0),this.currentStep=t},validateBeforeSubmit:function(){var t=this;this.error="",this.$validator.validateAll().then(function(a){if(a){t.isLoading=!0;var e=t.steps[t.currentStep].code,s=t.steps[t.currentStep].fields.map(function(t){var a={};return a.name=t.name,a.value=t.value,a});t.rFields.update({code:e},s).then(function(a){t.currentStep++,t.setStep(t.currentStep)},function(a){a.body.message?t.error=a.body.message:t.error=a.status+" - "+a.statusText}).finally(function(){this.isLoading=!1})}})}},mounted:function(){this.getSteps()}},At={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"}),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[t.steps.length?e("ul",{staticClass:"steps is-horizontal is-medium is-centered has-content-centered"},t._l(t.steps,function(a){return e("li",{key:a.label,staticClass:"steps-segment has-gaps",class:{"is-active":a.isActive}},[e("span",{staticClass:"steps-marker"},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa",class:a.icon})])]),t._v(" "),e("div",{staticClass:"steps-content"},[e("p",{staticClass:"heading"},[t._v(t._s(a.label))])])])})):e("div",{staticClass:"content has-text-grey has-text-centered"},[t._v("There is nothing to do")]),t._v(" "),t.steps.length>0?e("form",{staticClass:"section is-max-width-form",attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),t.validateBeforeSubmit(a)}}},[t.steps[t.currentStep].help?e("div",{staticClass:"content has-text-grey has-text-centered",domProps:{innerHTML:t._s(t.steps[t.currentStep].help)}}):t._e(),t._v(" "),t._l(t.steps[t.currentStep].fields,function(a){return e("div",{key:a.name,staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v(t._s(a.label))])]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},["checkbox"===a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:a.validate,expression:"field.validate"}],staticClass:"input",class:{"is-danger":t.errors.has(a.name)},attrs:{name:a.name,placeholder:a.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(a.value)?t._i(a.value,null)>-1:a.value},on:{change:function(e){var s=a.value,i=e.target,r=!!i.checked;if(Array.isArray(s)){var n=t._i(s,null);i.checked?n<0&&t.$set(a,"value",s.concat([null])):n>-1&&t.$set(a,"value",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(a,"value",r)}}}):"radio"===a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:a.validate,expression:"field.validate"}],staticClass:"input",class:{"is-danger":t.errors.has(a.name)},attrs:{name:a.name,placeholder:a.placeholder,type:"radio"},domProps:{checked:t._q(a.value,null)},on:{change:function(e){t.$set(a,"value",null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:a.validate,expression:"field.validate"}],staticClass:"input",class:{"is-danger":t.errors.has(a.name)},attrs:{name:a.name,placeholder:a.placeholder,type:a.type},domProps:{value:a.value},on:{input:function(e){e.target.composing||t.$set(a,"value",e.target.value)}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has(a.name),expression:"errors.has(field.name)"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has(a.name),expression:"errors.has(field.name)"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first(a.name)))])]),t._v(" "),a.help?e("p",{staticClass:"help"},[t._v(t._s(a.help))]):t._e()])])])}),t._v(" "),t.currentStep<t.steps.length-1?e("div",{staticClass:"has-text-centered"},[e("button",{staticClass:"button is-primary",attrs:{disabled:t.errors.any()}},[t._m(0),e("span",[t._v("Next")])])]):t._e()],2):t._e(),t._v(" "),t.error?e("div",{staticClass:"is-centered columns"},[e("div",{staticClass:"column is-narrow"},[e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n              "+t._s(t.error)+"\n            ")])])])]):t._e(),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-arrow-circle-right"})])}]},Lt=e("VU/8")($t,At,!1,null,null,null).exports,Nt={name:"about",components:{Breadcrumb:h},data:function(){return{version:{installed:"",latest:""},isUpToDate:!0,user:l.getProfile(),updateLogs:null,isLoaded:!1,isUpdating:!1,rVersions:this.$resource(o+"setup/versions/latest")}},methods:{get:function(){var t=this;this.rVersions.query().then(function(a){t.version=a.body,t.version.installed!==t.version.latest&&(t.isUpToDate=!1)},function(t){t.body.message?console.log(t.body.message):console.log(t.status+" - "+t.statusText)}).finally(function(){this.isLoaded=!0})},update:function(){var t=this;this.updateLogs="",this.isUpdating=!0,this.rVersions.save().then(function(a){t.updateLogs=a.body,t.get()},function(a){a.body.message?t.updateLogs=a.body.message:console.log(a.status+" - "+a.statusText)}).finally(function(){this.isUpdating=!1})}},mounted:function(){this.get()}},St={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:"Home"},{link:"/about",icon:"fa-info-circle",text:"About",isActive:!0}]}})],1),t._v(" "),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v("About")]),t._v(" "),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Own my money")]),t._v(" "),t.isLoaded?e("div",{staticClass:"content field is-grouped is-grouped-multiline"},[e("div",{staticClass:"control"},[e("div",{staticClass:"tags has-addons"},[e("span",{staticClass:"tag is-dark"},[t._v("Installed version")]),e("span",{staticClass:"tag",class:[t.isUpToDate?"is-success":"is-danger"]},[t._v(t._s(t.version.installed))])])]),t._v(" "),t.isUpToDate?t._e():e("div",{staticClass:"control"},[e("div",{staticClass:"tags has-addons"},[e("span",{staticClass:"tag is-dark"},[t._v("Latest version")]),e("span",{staticClass:"tag is-info"},[t._v(t._s(t.version.latest))])])]),t._v(" "),t._m(0)]):t._e(),t._v(" "),!t.isUpToDate&&this.user.scope.admin?e("section",{staticClass:"content"},[e("button",{staticClass:"button is-primary",class:{"is-loading":t.isUpdating},attrs:{disabled:t.isUpdating},on:{click:t.update}},[t._m(1),e("span",[t._v("Update to "+t._s(t.version.latest))])]),t._v(" "),t.updateLogs?e("pre",{staticClass:"section content"},t._l(t.updateLogs,function(a){return e("span",{staticClass:"is-block"},[t._v(t._s(t._f("moment")(a.timestamp,"HH:mm:ss"))+"   "+t._s(a.message))])})):t._e()]):t._e(),t._v(" "),t._m(2)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"control"},[a("a",{attrs:{href:"https://github.com/nioc/own-my-money/releases/latest",target:"_blank"}},[this._v("Changelog")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-wrench"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"content"},[e("p",[t._v("Own my money is a simple way to track your bank activity on any device connected to the web (pc, smartphone, tablet, ...).")]),t._v(" "),e("p",[t._v("If you have any issues or feature requests, please create an "),e("a",{attrs:{href:"https://github.com/nioc/own-my-money/issues",target:"_blank"}},[t._v("issue")]),t._v(".")]),t._v(" "),e("p",[t._v("This project is licensed under the "),e("a",{attrs:{href:"https://www.gnu.org/licenses/quick-guide-gplv3.html",target:"_blank"}},[t._v("GNU General Public License v3.0")]),t._v(".")])])}]},It=e("VU/8")(Nt,St,!1,null,null,null).exports;s.default.use(v.a);var Pt=new v.a({routes:[{path:"/",name:"home",component:kt,meta:{title:"Home"}},{path:"/setup",name:"setup",component:Lt,meta:{title:"Setup server"}},{path:"/about",name:"about",component:It,meta:{title:"About"}},{path:"/accounts",name:"accounts",component:C,meta:{title:"Accounts"}},{path:"/accounts/:id",name:"account",component:j,meta:{title:"Account :id"}},{path:"/login",name:"login",component:T,meta:{title:"Login"}},{path:"/profile",name:"profile",component:R,meta:{title:"Profile"}},{path:"/patterns",name:"patterns",component:X,meta:{title:"Patterns"}},{path:"/users",name:"users",component:Z,meta:{title:"Manage users"}},{path:"/maps",name:"maps",component:lt,meta:{title:"Edit maps"}},{path:"/maps/new",name:"newMap",component:ut,props:{isNew:!0},meta:{title:"Edit map :code"}},{path:"/maps/:code",name:"map",component:ut,props:{isNew:!1},meta:{title:"Edit map :code"}},{path:"/categories",name:"categories",component:rt,meta:{title:"Edit categories and subcategories"}},{path:"/categories/:id",name:"category",component:et,props:{isCategory:!0},meta:{title:"Edit categorie :id"}},{path:"/categories/:pid/subcategories/:id",name:"subcategory",component:et,props:{isCategory:!1},meta:{title:"Edit subcategorie :id"}}]}),jt=e("8AgW"),Dt=e.n(jt),qt=e("sUu7"),Tt=e("W1GH"),Et=e.n(Tt),Ut=e("O3Oo"),zt=e.n(Ut);e("e0XP"),e("/8fb"),e("K5tM");s.default.config.productionTip=!1,s.default.use(x.a),s.default.use(qt.a),s.default.use(Dt.a),s.default.use(zt.a,{defaultIconPack:"fa",defaultFirstDayOfWeek:1,defaultDateParser:function(t){return s.default.moment(t,"DD-MM-YYYY").toDate()}}),delete s.default.http.headers.common.Authorization;var Bt=l.getAuthHeader();Bt&&(s.default.http.headers.common.Authorization=Bt),Pt.beforeEach(function(t,a,e){if(l.getToken(),!l.user.authenticated&&"login"!==t.name&&"setup"!==t.name)return l.logout(),n.$emit("user-logged",{}),void e("/login?redirect="+t.fullPath);if(t.meta.title){var s=t.meta.title,i=t.params;for(var r in i)s=s.replace(":"+r,i[r]);document.title=s+" | OwnMyMoney"}var o=document.getElementById("navbar-burger");o&&(o.classList.remove("is-active"),document.getElementById("navbar-menu").classList.remove("is-active")),e()}),s.default.http.interceptors.push(function(t,a){a(function(t){return 401===t.status&&-1===Pt.currentRoute.fullPath.search(/^\/login/)&&(l.logout(),n.$emit("user-logged",{}),Pt.replace({name:"login",query:{redirect:Pt.currentRoute.fullPath}})),t})}),s.default.filter("currency",function(t){return Et.a.formatMoney(t,{symbol:"€",decimal:",",thousand:" ",precision:2,format:"%v %s"})}),new s.default({el:"#money",router:Pt,components:{App:u},template:"<App/>"})},RgOD:function(t,a){},e0XP:function(t,a){},"o/R/":function(t,a){},uslO:function(t,a,e){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return e(r(t))}function r(t){var a=s[t];if(!(a+1))throw new Error("Cannot find module '"+t+"'.");return a}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.73d2876ba37a8dfbc799.js.map