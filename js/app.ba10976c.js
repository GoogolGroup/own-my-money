(function(t){function e(e){for(var s,n,o=e[0],c=e[1],l=e[2],d=0,u=[];d<o.length;d++)n=o[d],i[n]&&u.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(e);while(u.length)u.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var o=a[n];0!==i[o]&&(s=!1)}s&&(r.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},n={app:0},i={app:0},r=[];function o(t){return c.p+"js/"+({"system-settings~user-settings":"system-settings~user-settings","system-settings":"system-settings","user-settings":"user-settings"}[t]||t)+"."+{"system-settings~user-settings":"6939c5b7","system-settings":"0deb463c","user-settings":"a0a95eb0"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"system-settings":1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise(function(e,a){for(var s="css/"+({"system-settings~user-settings":"system-settings~user-settings","system-settings":"system-settings","user-settings":"user-settings"}[t]||t)+"."+{"system-settings~user-settings":"31d6cfe0","system-settings":"3d0729e1","user-settings":"31d6cfe0"}[t]+".css",i=c.p+s,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var l=r[o],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===s||d===i))return e()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){l=u[o],d=l.getAttribute("data-href");if(d===s||d===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var s=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");r.request=s,delete n[t],p.parentNode.removeChild(p),a(r)},p.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(p)}).then(function(){n[t]=0}));var s=i[t];if(0!==s)if(s)e.push(s[2]);else{var r=new Promise(function(e,a){s=i[t]=[e,a]});e.push(s[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(t),l=function(e){d.onerror=d.onload=null,clearTimeout(u);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+s+": "+n+")");r.type=s,r.request=n,a[1](r)}i[t]=void 0}};var u=setTimeout(function(){l({type:"timeout",target:d})},12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/own-my-money/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var p=d;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"039a":function(t,e,a){"use strict";var s=a("3760"),n=a.n(s);n.a},"0f0a":function(t,e,a){"use strict";var s=a("66cd"),n=a.n(s);n.a},1:function(t,e){},"29d6":function(t,e,a){"use strict";var s=a("f4de"),n=a.n(s);n.a},"2fbc":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box is-radiusless has-background-white-bis"},[a("nav",{staticClass:"breadcrumb container",attrs:{"aria-label":"breadcrumbs"}},[a("ul",t._l(t.items,function(e){return a("li",{key:e.text,class:{"is-active":e.isActive}},[a("router-link",{attrs:{to:e.link}},[e.icon?a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fa",class:e.icon,attrs:{"aria-hidden":"true"}})]):t._e(),a("span",{class:{"is-hidden-mobile":e.icon}},[t._v(t._s(e.text))])])],1)}),0)])])},n=[],i={props:{items:{type:Array,required:!0}}},r=i,o=(a("29d6"),a("2877")),c=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=c.exports},"2fc4":function(t,e,a){},3760:function(t,e,a){},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return a(e)}function i(t){var e=s[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("386d"),a("a481"),a("7f7f");var s,n,i=a("2b0e"),r=a("2f62"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t.user.authenticated?s("nav",{staticClass:"navbar is-dark is-fixed-top"},[s("div",{staticClass:"navbar-brand"},[s("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[s("img",{attrs:{src:a("d803")}}),t._v(" OwnMyMoney")]),s("a",{staticClass:"navbar-burger",attrs:{role:"button",id:"navbar-burger","aria-label":"menu","aria-expanded":"false"},on:{click:t.toggleMenu}},[s("span",{staticClass:"is-primary",attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}})])],1),s("div",{staticClass:"navbar-menu",attrs:{id:"navbar-menu"}},[s("div",{staticClass:"navbar-start"},[s("router-link",{staticClass:"navbar-item",attrs:{to:"/accounts"}},[s("i",{staticClass:"fa fa-table fa-fw"}),t._v(" "+t._s(t.$tc("objects.account",2)))])],1),s("div",{staticClass:"navbar-end"},[this.user.scope.admin?s("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[s("a",{staticClass:"navbar-link"},[s("i",{staticClass:"fa fa-wrench fa-fw"}),t._v(" "+t._s(t.$t("labels.systemSettings")))]),s("div",{staticClass:"navbar-dropdown is-right"},[s("router-link",{staticClass:"navbar-item",attrs:{to:"/categories"}},[s("i",{staticClass:"fa fa-folder-open-o fa-fw"}),t._v(" "+t._s(t.$tc("objects.category",2)))]),s("router-link",{staticClass:"navbar-item",attrs:{to:"/maps"}},[s("i",{staticClass:"fa fa-random fa-fw"}),t._v(" "+t._s(t.$tc("objects.transactionMapping",2)))]),s("router-link",{staticClass:"navbar-item",attrs:{to:"/users"}},[s("i",{staticClass:"fa fa-users fa-fw"}),t._v(" "+t._s(t.$tc("objects.user",2)))])],1)]):t._e(),s("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[s("a",{staticClass:"navbar-link"},[s("i",{staticClass:"fa fa-globe fa-fw"}),t._v(" "+t._s(t.$t("labels.language")))]),s("div",{staticClass:"navbar-dropdown is-right"},[s("a",{staticClass:"navbar-item",class:{"router-link-exact-active":"en"===this.$i18n.locale},on:{click:function(e){return t.setLocale("en")}}},[t._v("English")]),s("a",{staticClass:"navbar-item",class:{"router-link-exact-active":"fr"===this.$i18n.locale},on:{click:function(e){return t.setLocale("fr")}}},[t._v("Français")])])]),s("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[s("a",{staticClass:"navbar-link"},[s("i",{staticClass:"fa fa-user fa-fw"}),t._v(" "+t._s(this.user.login))]),s("div",{staticClass:"navbar-dropdown is-right"},[s("router-link",{staticClass:"navbar-item",attrs:{to:"/profile"}},[s("i",{staticClass:"fa fa-user-circle fa-fw"}),t._v(" "+t._s(t.$t("labels.profile")))]),s("router-link",{staticClass:"navbar-item",attrs:{to:"/patterns"}},[s("i",{staticClass:"fa fa-magic fa-fw"}),t._v(" "+t._s(t.$tc("objects.pattern",2)))]),s("hr",{staticClass:"navbar-divider"}),s("router-link",{staticClass:"navbar-item",attrs:{to:"/about"}},[s("i",{staticClass:"fa fa-info-circle fa-fw"}),t._v(" "+t._s(t.$t("labels.about")))]),s("a",{staticClass:"navbar-item",attrs:{href:"https://github.com/nioc/own-my-money/issues/new",target:"_blank"}},[s("i",{staticClass:"fa fa-bug fa-fw"}),t._v(" "+t._s(t.$t("labels.reportABug")))]),s("hr",{staticClass:"navbar-divider"}),s("a",{staticClass:"navbar-item",on:{click:function(e){return t.logout()}}},[s("i",{staticClass:"fa fa-sign-out fa-fw"}),t._v(" "+t._s(t.$t("labels.logout")))])],1)])])])]):t._e(),s("transition-router",[s("router-view",{key:t.$route.fullPath})],1)],1)},c=[],l=a("d1dd"),d=a("d43b"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:t.transitionName,mode:"out-in","enter-active-class":t.transitionEnterActiveClass}},[t._t("default")],2)},p=[],m=(a("28a5"),"fade"),b={name:"TransitionRouter",data:function(){return{transitionName:m,transitionEnterActiveClass:""}},created:function(){var t=this;this.$router.beforeEach(function(e,a,s){var n=e.meta.transitionName||a.meta.transitionName||m;if("slide"===n){var i=e.path.split("/").length,r=a.path.split("/").length;n=i<r?"slide-right":"slide-left"}t.transitionEnterActiveClass="".concat(n,"-enter-active"),t.transitionName=n,s()})}},h=b,f=(a("0f0a"),a("2877")),g=Object(f["a"])(h,u,p,!1,null,null,null),v=g.exports,y={name:"app",components:{TransitionRouter:v},data:function(){return{isOnline:window.navigator.onLine,user:l["a"].getProfile()}},methods:{logout:function(){this.user=l["a"].logout(),this.$router.replace({name:"login"})},toggleMenu:function(t){t.target.classList.toggle("is-active"),document.getElementById("navbar-menu").classList.toggle("is-active")},notifyConnectivity:function(t){this.isOnline="online"===t.type,this.$store.commit("setConnectivity",this.isOnline);var e={};e.message=this.isOnline?this.$t("labels.isOnline"):this.$t("labels.isOffline"),e.type=this.isOnline?"is-success":"is-danger",e.position="is-bottom",e.queue=!1,this.$toast.open(e)},setLocale:function(t){var e=this;i["default"].http.headers.common["Accept-Language"]=t,document.querySelector("html").setAttribute("lang",t),this.$i18n.locale=t,this.$moment.locale(t);var a=this.$moment.localeData();this.$buefy.setOptions({defaultIconPack:"fa",defaultFirstDayOfWeek:a.firstDayOfWeek(),defaultMonthNames:a.months(),defaultDayNames:a.weekdaysMin(),defaultDateFormatter:function(t){return e.$moment(t,"L").format("L")}})}},mounted:function(){var t=this;d["a"].$on("user-logged",function(e){t.user=e}),this.$store.commit("setConnectivity",this.isOnline),window.addEventListener("offline",this.notifyConnectivity),window.addEventListener("online",this.notifyConnectivity)}},C=y,_=Object(f["a"])(C,o,c,!1,null,null,null),k=_.exports,$=a("8c4f"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero"},[a("div",{staticClass:"hero-head"},[a("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:this.$t("labels.home")},{link:"/accounts",icon:"fa-table",text:this.$tc("objects.account",2),isActive:!0}]}})],1),a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container box"},[a("h1",{staticClass:"title container"},[t._v(t._s(t.$tc("objects.account",2)))]),t.error?a("div",{staticClass:"message is-danger"},[a("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e(),t.accounts.length?a("div",{staticClass:"table-container"},[a("table",{staticClass:"table is-striped is-hoverable is-fullwidth"},[a("thead",[a("tr",[a("th"),a("th",[t._v(t._s(t.$tc("objects.account",1)))]),a("th",[t._v(t._s(t.$t("fieldnames.balance")))]),a("th",[t._v(t._s(t.$t("fieldnames.updated")))])])]),a("tbody",t._l(t.accounts,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"icon-account"},[e.iconUrl?a("img",{attrs:{src:e.iconUrl,height:"24",width:"24"}}):t._e()]),a("td",[a("router-link",{attrs:{to:{name:"account",params:{id:e.id}}}},[t._v(t._s(e.bankId)+" "+t._s(e.branchId)+" "+t._s(e.accountId)),e.label?a("span",[t._v(" ("+t._s(e.label)+")")]):t._e()])],1),a("td",[t._v(t._s(t.$n(e.balance,"currency")))]),e.lastUpdate?a("td",[t._v(t._s(t._f("moment")(e.lastUpdate,"from","now")))]):a("td")])}),0)])]):a("div",[a("p",[t._v(t._s(t.$t("labels.noAccount")))])]),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-primary",attrs:{role:"button",disabled:!t.isOnline},on:{click:function(e){t.isCreateAccountModalActive=!0}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" "+t._s(t.$t("actions.addAccount")))])]),a("p",{staticClass:"control"},[a("b-field",{staticClass:"file"},[a("b-upload",{attrs:{disabled:!t.isOnline||t.upload.isUploading},on:{input:t.uploadDataset},model:{value:t.upload.file,callback:function(e){t.$set(t.upload,"file",e)},expression:"upload.file"}},[a("a",{staticClass:"button is-primary",attrs:{disabled:!t.isOnline||t.upload.isUploading}},[a("b-icon",{attrs:{icon:"upload"}}),a("span",[t._v(t._s(t.$t("actions.uploadOfx")))])],1)]),t.upload.file?a("span",{staticClass:"file-name"},[t._v("\n              "+t._s(t.upload.file.name)+" ("+t._s(t.$tc("objects.byte",t.upload.file.size))+")\n            ")]):t._e()],1)],1)]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-body"},[t.upload.result?a("div",{staticClass:"message is-danger"},[a("div",{staticClass:"message-body"},[t._v("\n              "+t._s(t.upload.result)+"\n            ")])]):t._e()])]),a("b-modal",{attrs:{active:t.isCreateAccountModalActive,"has-modal-card":"",scroll:"keep"},on:{"update:active":function(e){t.isCreateAccountModalActive=e}}},[a("create-account")],1),a("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1)])])},A=[],I=a("6de1"),S=a("2fbc"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$t("actions.addAccount")))])]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.bankIdentifier")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account.bankId,expression:"account.bankId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("bankIdentifier")},attrs:{type:"text",name:"bankIdentifier",placeholder:t.$t("fieldnames.bankIdentifier")},domProps:{value:t.account.bankId},on:{input:function(e){e.target.composing||t.$set(t.account,"bankId",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("bankIdentifier"),expression:"errors.has('bankIdentifier')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("bankIdentifier")))])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.branchIdentifier")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account.branchId,expression:"account.branchId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("branchIdentifier")},attrs:{type:"text",name:"branchIdentifier",placeholder:t.$t("fieldnames.branchIdentifier")},domProps:{value:t.account.branchId},on:{input:function(e){e.target.composing||t.$set(t.account,"branchId",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("branchIdentifier"),expression:"errors.has('branchIdentifier')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("branchIdentifier")))])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.accountIdentifier")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account.accountId,expression:"account.accountId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("accountIdentifier")},attrs:{type:"text",name:"accountIdentifier",placeholder:t.$t("fieldnames.accountIdentifier")},domProps:{value:t.account.accountId},on:{input:function(e){e.target.composing||t.$set(t.account,"accountId",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("accountIdentifier"),expression:"errors.has('accountIdentifier')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("accountIdentifier")))])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.label")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account.label,expression:"account.label"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:t.$t("fieldnames.label")},domProps:{value:t.account.label},on:{input:function(e){e.target.composing||t.$set(t.account,"label",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])])]),t.error?a("div",{staticClass:"message is-danger block"},[a("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e()]),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-primary",attrs:{disabled:!t.isOnline}},[t._v(t._s(t.$t("actions.create")))]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$parent.close()}}},[t._v(t._s(t.$t("actions.cancel")))])]),a("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1)])},T=[],P={data:function(){return{account:{},error:"",isLoading:!1,rAccounts:this.$resource(I["a"].API_URL+"accounts{/id}")}},computed:{isOnline:function(){return this.$store.state.isOnline}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.isLoading=!0,t.rAccounts.save(t.account).then(function(e){t.$parent.$parent.getAccounts(),t.$parent.close()},function(e){e.body.message?t.error=e.body.message:t.error=e.status+" - "+e.statusText}).finally(function(){this.isLoading=!1}))})}}},j=P,D=Object(f["a"])(j,x,T,!1,null,null,null),E=D.exports,L={name:"accounts",components:{Breadcrumb:S["a"],CreateAccount:E},data:function(){return{accounts:[],error:"",isCreateAccountModalActive:!1,isLoading:!1,upload:{file:null,isUploading:!1,result:""},rAccounts:this.$resource(I["a"].API_URL+"accounts{/id}"),rDatasets:this.$resource(I["a"].API_URL+"dataset")}},computed:{isOnline:function(){return this.$store.state.isOnline}},methods:{getAccounts:function(){var t=this;this.isLoading=!0,this.rAccounts.query().then(function(e){t.accounts=e.body,t.accounts.map(function(t){return t.iconUrl=t.iconUrl?t.iconUrl:null,t})},function(e){e.body.message?t.error=e.body.message:t.error=e.status+" - "+e.statusText}).finally(function(){this.isLoading=!1})},uploadDataset:function(){var t=this;this.upload.result="";var e=this.upload.file,a=new FormData;a.append("Content-Type",e.type||"application/octet-stream"),a.append("file",e),e.size>8e7?this.upload.result=this.$t("labels.fileTooBig"):(this.upload.isUploading=!0,this.isLoading=!0,this.rDatasets.save({},a).then(function(e){e.body.message&&(t.upload.result=e.body.message),t.getAccounts()},function(e){e.body.message?t.upload.result=e.body.message:t.upload.result=e.status+" - "+e.statusText}).finally(function(){this.upload.isUploading=!1,this.isLoading=!1}))}},mounted:function(){this.getAccounts()}},U=L,M=Object(f["a"])(U,w,A,!1,null,null,null),O=M.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero"},[a("div",{staticClass:"hero-head"},[a("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:this.$t("labels.home")},{link:"/accounts",icon:"fa-table",text:this.$tc("objects.account",2)},{link:"/accounts",text:t.accountTitle,isActive:!0}]}})],1),a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container box"},[a("h1",{staticClass:"title container"},[t._v(t._s(t.$tc("objects.account",1))+" "+t._s(t.accountTitle))]),a("b-tabs",{attrs:{type:"is-boxed",animated:!1}},[a("b-tab-item",{staticClass:"has-half-margin-mobile",attrs:{label:t.$tc("objects.transaction",2),icon:"file-text-o"}},[t.isLoaded?a("div",{staticClass:"columns no-padding-parent-mobile is-multiline"},[a("div",{staticClass:"column no-padding-mobile is-full"},[a("transactions-history-chart",{attrs:{title:t.$t("labels.transactionsByDay"),chartEndpoint:"accounts/"+this.account.id+"/transactions/history",isIndependent:!0,date:t.date}})],1)]):t._e(),t.isLoaded?a("transactions",{attrs:{url:t.url,duration:t.account.duration}}):t._e(),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control"},[a("b-field",{staticClass:"file"},[a("b-upload",{attrs:{disabled:!t.isOnline||t.upload.isUploading},on:{input:t.uploadDataset},model:{value:t.upload.file,callback:function(e){t.$set(t.upload,"file",e)},expression:"upload.file"}},[a("a",{staticClass:"button is-primary",attrs:{disabled:!t.isOnline||t.upload.isUploading}},[a("b-icon",{attrs:{icon:"upload"}}),a("span",[t._v(t._s(t.$t("actions.uploadOfxJson")))])],1)]),t.upload.file?a("span",{staticClass:"file-name"},[t._v("\n                  "+t._s(t.upload.file.name)+" ("+t._s(t.$tc("objects.byte",t.upload.file.size))+")\n                ")]):t._e()],1)],1),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.upload.map,expression:"upload.map"}],attrs:{name:"parent"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.upload,"map",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-- JSON Map --")]),t._l(t.maps,function(e){return a("option",{key:e.code,domProps:{value:e.code}},[t._v(t._s(e.label))])})],2)])])]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-body"},[t.upload.result?a("div",{staticClass:"message is-danger"},[a("div",{staticClass:"message-body"},[t._v("\n                  "+t._s(t.upload.result)+"\n                ")])]):t._e()])])],1),a("b-tab-item",{attrs:{label:t.$t("actions.edit"),icon:"pencil"}},[a("form",{staticClass:"section is-max-width-form",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.validateUpdateBeforeSubmit(e)}}},[a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.bankIdentifier")))])]),a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.bankId,expression:"updatedAccount.bankId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("bankIdentifier")},attrs:{type:"text",name:"bankIdentifier",placeholder:t.$t("fieldnames.bankIdentifier")},domProps:{value:t.updatedAccount.bankId},on:{input:function(e){e.target.composing||t.$set(t.updatedAccount,"bankId",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("bankIdentifier"),expression:"errors.has('bankIdentifier')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("bankIdentifier")))])])])])]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.branchIdentifier")))])]),a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.branchId,expression:"updatedAccount.branchId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("branchIdentifier")},attrs:{type:"text",name:"branchIdentifier",placeholder:t.$t("fieldnames.branchIdentifier")},domProps:{value:t.updatedAccount.branchId},on:{input:function(e){e.target.composing||t.$set(t.updatedAccount,"branchId",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("branchIdentifier"),expression:"errors.has('branchIdentifier')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("branchIdentifier")))])])])])]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.accountIdentifier")))])]),a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.accountId,expression:"updatedAccount.accountId"},{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],staticClass:"input",class:{"is-danger":t.errors.has("accountIdentifier")},attrs:{type:"text",name:"accountIdentifier",placeholder:t.$t("fieldnames.accountIdentifier")},domProps:{value:t.updatedAccount.accountId},on:{input:function(e){e.target.composing||t.$set(t.updatedAccount,"accountId",e.target.value)}}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("accountIdentifier"),expression:"errors.has('accountIdentifier')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("accountIdentifier")))])])])])]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.label")))])]),a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.label,expression:"updatedAccount.label"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:t.$t("fieldnames.label")},domProps:{value:t.updatedAccount.label},on:{input:function(e){e.target.composing||t.$set(t.updatedAccount,"label",e.target.value)}}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])])])])]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.duration")))])]),a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.duration,expression:"updatedAccount.duration"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.updatedAccount,"duration",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"P1M"}},[t._v(t._s(t.$tc("objects.lastMonth",1)))]),a("option",{attrs:{value:"P3M"}},[t._v(t._s(t.$tc("objects.lastMonth",3)))]),a("option",{attrs:{value:"P6M"}},[t._v(t._s(t.$tc("objects.lastMonth",6)))]),a("option",{attrs:{value:"P1Y"}},[t._v(t._s(t.$tc("objects.lastYear",1)))]),a("option",{attrs:{value:"P2Y"}},[t._v(t._s(t.$tc("objects.lastYear",2)))])])])])])])]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.icon")))])]),a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("b-field",{staticClass:"file"},[t.account.iconUrl?a("img",{staticClass:"icon-account-admin",attrs:{src:t.account.iconUrl}}):t._e(),a("b-upload",{attrs:{disabled:!t.isOnline||t.icon.isUploading,accept:"image/*"},on:{input:t.uploadIcon},model:{value:t.icon.file,callback:function(e){t.$set(t.icon,"file",e)},expression:"icon.file"}},[a("a",{staticClass:"button",attrs:{disabled:!t.isOnline||t.icon.isUploading}},[a("b-icon",{attrs:{icon:"upload"}}),a("span",[t._v(t._s(t.$t("actions.uploadIcon")))])],1)]),t.icon.file?a("span",{staticClass:"file-name"},[t._v("\n                        "+t._s(t.icon.file.name)+" ("+t._s(t.$tc("objects.byte",t.icon.file.size))+")\n                      ")]):t._e()],1)],1),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-body"},[t.icon.result?a("div",{staticClass:"message is-danger"},[a("div",{staticClass:"message-body"},[t._v("\n                          "+t._s(t.icon.result)+"\n                        ")])]):t._e()])])])])]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-label is-normal"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.balance")))])]),a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedAccount.balance,expression:"updatedAccount.balance"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input",class:{"is-danger":t.errors.has("balance")},attrs:{type:"number",step:"0.01",name:"balance",placeholder:t.$t("fieldnames.balance")},domProps:{value:t.updatedAccount.balance},on:{input:function(e){e.target.composing||t.$set(t.updatedAccount,"balance",e.target.value)}}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("balance"),expression:"errors.has('balance')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("balance")))])])])])]),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-label is-normal"}),a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"buttons"},[a("button",{staticClass:"button is-primary",attrs:{type:"submit",role:"button",disabled:!t.isOnline}},[a("i",{staticClass:"fa fa-save"}),t._v(" "+t._s(t.$t("actions.save")))]),a("button",{staticClass:"button is-danger",attrs:{type:"button",role:"button",disabled:!t.isOnline},on:{click:t.deleteAccount}},[a("i",{staticClass:"fa fa-trash"}),t._v(" "+t._s(t.$t("actions.delete")))])])])])])]),a("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading}})],1)],1)],1)])])},q=[],B=a("59ad"),R=a.n(B),G=a("f499"),z=a.n(G),F=a("e814"),H=a.n(F),W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-collapse",{staticClass:"card",attrs:{open:t.search.isActive},on:{"update:open":function(e){return t.$set(t.search,"isActive",e)}}},[a("div",{staticClass:"card-header",attrs:{slot:"trigger"},slot:"trigger"},[a("span",{staticClass:"card-header-icon"},[a("i",{staticClass:"fa",class:t.search.isActive?"fa-angle-down":"fa-angle-right"})]),a("p",{staticClass:"card-header-title"},[t._v(t._s(t.$t("labels.searchTransactions")))])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"field is-grouped is-grouped-multiline is-block-mobile"},[a("div",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.query,expression:"search.query"}],staticClass:"input",attrs:{type:"text",placeholder:t.$t("labels.findATransaction")},domProps:{value:t.search.query},on:{input:function(e){e.target.composing||t.$set(t.search,"query",e.target.value)}}}),a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-search"})])]),a("div",{staticClass:"control"},[a("b-datepicker",{attrs:{placeholder:"Start date",icon:"calendar",editable:"","max-date":t.search.currentDate},on:{input:function(e){return t.get()}},model:{value:t.search.periodStart,callback:function(e){t.$set(t.search,"periodStart",e)},expression:"search.periodStart"}})],1),a("div",{staticClass:"control"},[a("b-datepicker",{attrs:{placeholder:"End date",icon:"calendar",editable:"","max-date":t.search.currentDate},on:{input:function(e){return t.get()}},model:{value:t.search.periodEnd,callback:function(e){t.$set(t.search,"periodEnd",e)},expression:"search.periodEnd"}})],1),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.search.category,expression:"search.category"}],attrs:{name:"parent"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.search,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-- "+t._s(t.$tc("objects.category",1))+" --")]),t._l(t.categories,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)])]),t.search.category&&t.categoriesAndSubcategoriesLookup[t.search.category].sub.length>0?a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.search.subcategory,expression:"search.subcategory"}],attrs:{name:"parent"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.search,"subcategory",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-- "+t._s(t.$tc("objects.subcategory",1))+" --")]),t._l(t.categoriesAndSubcategoriesLookup[t.search.category].sub,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)])]):t._e()])])]),a("b-collapse",{staticClass:"card",attrs:{open:t.batch.isActive},on:{"update:open":function(e){return t.$set(t.batch,"isActive",e)}}},[a("div",{staticClass:"card-header",attrs:{slot:"trigger"},slot:"trigger"},[a("span",{staticClass:"card-header-icon"},[a("i",{staticClass:"fa",class:t.batch.isActive?"fa-angle-down":"fa-angle-right"})]),a("p",{staticClass:"card-header-title"},[t._v(t._s(t.$t("labels.batchUpdates")))])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"field is-grouped is-grouped-multiline"},[a("div",{staticClass:"control"},[a("div",{staticClass:"input is-static"},[t._v(t._s(t.$tc("objects.transactionsSelected",t.batch.checkedTransactions.length))+" ("+t._s(t.$n(t.transactionsCheckedSum,"currency"))+")")])]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.batch.category,expression:"batch.category"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.batch,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-- "+t._s(t.$tc("objects.category",1))+" --")]),t._l(t.categories,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)])]),t.batch.category&&t.categoriesAndSubcategoriesLookup[t.batch.category].sub.length>0?a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.batch.subcategory,expression:"batch.subcategory"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.batch,"subcategory",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-- "+t._s(t.$tc("objects.subcategory",1))+" --")]),t._l(t.categoriesAndSubcategoriesLookup[t.batch.category].sub,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)])]):t._e(),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":t.batch.isLoading},attrs:{disabled:t.batch.isLoading||!t.isOnline},on:{click:t.processBatchUpdate}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-cogs"})]),a("span",[t._v(t._s(t.$t("actions.apply")))])])]),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-light",attrs:{disabled:t.batch.isLoading},on:{click:t.selectAll}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-check-square-o"})]),a("span",[t._v(t._s(t.$t("actions.selectAll")))])])]),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-light",attrs:{disabled:t.batch.isLoading},on:{click:t.selectNone}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-square-o"})]),a("span",[t._v(t._s(t.$t("actions.clear")))])])])]),a("div",{staticClass:"field is-block-mobile"},[a("progress",{staticClass:"progress",attrs:{max:"1"},domProps:{value:t.batch.progress}},[t._v(t._s(t.batch.progress)+" %")])]),a("div",{staticClass:"field"},[t.batch.result?a("div",{staticClass:"message is-danger"},[a("div",{staticClass:"message-body"},[t._v("\n            "+t._s(t.batch.result)+"\n          ")])]):t._e()])])]),a("b-table",{attrs:{data:t.displayedTransactions,paginated:!0,striped:!0,hoverable:!0,loading:t.isLoading,"default-sort":"datePosted","default-sort-direction":"desc",checkable:t.batch.isActive,"checked-rows":t.batch.checkedTransactions},on:{select:t.edit,"update:checkedRows":function(e){return t.$set(t.batch,"checkedTransactions",e)},"update:checked-rows":function(e){return t.$set(t.batch,"checkedTransactions",e)}},scopedSlots:t._u([{key:"default",fn:function(e){return[t.displayAccount?a("b-table-column",{attrs:{field:"icon"}},[a("span",{staticClass:"icon-transactions-account"},[e.row.iconUrl?a("img",{attrs:{src:e.row.iconUrl,title:e.row.accountLabel,height:"24",width:"24"}}):t._e(),a("span",{staticClass:"is-hidden-tablet"},[t._v(t._s(e.row.accountLabel))])])]):t._e(),a("b-table-column",{attrs:{field:"amount",label:t.$t("fieldnames.amount"),sortable:"",numeric:""}},[a("span",{class:[e.row.amount<0?"has-text-danger":"has-text-primary"]},[t._v(t._s(t.$n(e.row.amount,"currency")))])]),a("b-table-column",{attrs:{field:"name",label:t.$t("fieldnames.label"),sortable:""}},[t._v("\n        "+t._s(e.row.fullname)),e.row.note?a("span",{staticClass:"has-text-grey"},[t._v(" | "+t._s(e.row.note))]):t._e()]),a("b-table-column",{attrs:{field:"datePosted",label:t.$t("fieldnames.date"),sortable:""}},[t._v("\n        "+t._s(t._f("moment")(e.row.datePosted,"L"))+"\n      ")]),a("b-table-column",{attrs:{field:"category",label:t.$tc("objects.category",1),sortable:""}},[e.row.categoryIcon?a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-fw",class:e.row.categoryIcon})]):t._e(),t._v("\n        "+t._s(e.row.categoryLabel)),e.row.subcategory?a("span",[t._v(" / "+t._s(e.row.subcategoryLabel))]):t._e()])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[t._v(t._s(t.$t("labels.nothingToDisplay")))])])])]),a("template",{slot:"bottom-left"},[a("a",{staticClass:"button is-light",on:{click:t.downloadData}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-download fa-lg"})]),a("span",[t._v(t._s(t.$t("actions.download")))])])])],2),a("b-modal",{attrs:{active:t.modalTransaction.isActive,"has-modal-card":"",scroll:"keep"},on:{"update:active":function(e){return t.$set(t.modalTransaction,"isActive",e)}}},[a("transaction",{attrs:{transaction:t.modalTransaction.transaction,rTransactions:t.rTransactions}})],1)],1)},J=[],Y=a("5d73"),X=a.n(Y),V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$tc("objects.transaction",1)))])]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.label")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.name,expression:"transaction.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:t.$t("fieldnames.label")},domProps:{value:t.transaction.name},on:{input:function(e){e.target.composing||t.$set(t.transaction,"name",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.amount")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.amount,expression:"transaction.amount"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input",class:{"is-danger":t.errors.has("amount")},attrs:{type:"number",name:"amount",placeholder:t.$t("fieldnames.amount")},domProps:{value:t.transaction.amount},on:{input:function(e){e.target.composing||t.$set(t.transaction,"amount",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("amount"),expression:"errors.has('amount')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("amount")))])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.date")))]),a("div",{staticClass:"control"},[a("b-datepicker",{attrs:{placeholder:t.$t("fieldnames.date"),icon:"calendar",readonly:!1,"max-date":t.currentDate},model:{value:t.dateUser,callback:function(e){t.dateUser=e},expression:"dateUser"}})],1)]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.note")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.note,expression:"transaction.note"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"input",class:{"is-danger":t.errors.has("note")},attrs:{type:"text",name:"note",placeholder:t.$t("fieldnames.note")},domProps:{value:t.transaction.note},on:{input:function(e){e.target.composing||t.$set(t.transaction,"note",e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("note"),expression:"errors.has('note')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("note")))])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$tc("objects.category",1)))]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.transaction.category,expression:"transaction.category"}],attrs:{name:"parent"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.transaction,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-- "+t._s(t.$tc("objects.category",1))+" --")]),t._l(t.categories,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)])])]),t.transaction.category&&t.categoriesAndSubcategoriesLookup[t.transaction.category]&&t.categoriesAndSubcategoriesLookup[t.transaction.category].sub.length>0?a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.$tc("objects.subcategory",1)))]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.transaction.subcategory,expression:"transaction.subcategory"}],attrs:{name:"parent"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.transaction,"subcategory",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-- "+t._s(t.$tc("objects.subcategory",1))+" --")]),t._l(t.categoriesAndSubcategoriesLookup[t.transaction.category].sub,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)])])]):t._e(),t.error?a("div",{staticClass:"message is-danger block"},[a("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e()]),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-primary",attrs:{disabled:!t.isOnline}},[t._v(t._s(t.$t("actions.save")))]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$parent.close()}}},[t._v(t._s(t.$t("actions.cancel")))])]),a("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1)])},Z=[],K=a("a601"),Q={props:["rTransactions","transaction"],mixins:[K["a"]],data:function(){return{error:"",isLoading:!1,currentDate:new Date,rCategories:this.$resource(I["a"].API_URL+"categories{/id}")}},computed:{isOnline:function(){return this.$store.state.isOnline},dateUser:{get:function(){return this.$moment(this.transaction.dateUser).toDate()},set:function(t){this.transaction.dateUser=this.$moment(t).format()}}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.isLoading=!0,t.transaction.amount=R()(t.transaction.amount),t.rTransactions.update({id:t.transaction.id},t.transaction).then(function(e){t.$parent.close()},function(e){t.isLoading=!1,e.body.message?t.error=e.body.message:t.error=e.status+" - "+e.statusText}))})}},watch:{"transaction.category":function(){this.transaction.subcategory=""}},mounted:function(){this.getCategories(!1)}},tt=Q,et=Object(f["a"])(tt,V,Z,!1,null,null,null),at=et.exports,st=a("2e92"),nt={name:"transactions",components:{Transaction:at},props:{url:{required:!0,type:String},displayAccount:{required:!1,type:Boolean,default:!1},duration:{required:!1,type:String,default:"P3M"}},mixins:[K["a"]],data:function(){var t=new Date;return t.setHours(0,0,0),t.setMilliseconds(0),{transactions:[],isLoading:!1,batch:{isActive:!1,isLoading:!1,progress:0,result:"",checkedTransactions:[],category:"",subcategory:""},search:{isActive:!1,query:"",currentDate:t,periodStart:this.$moment(t).subtract(this.$moment.duration(this.duration)).toDate(),periodEnd:t,category:"",subcategory:""},modalTransaction:{isActive:!1,transaction:{}},rTransactions:this.$resource(this.url)}},computed:{isOnline:function(){return this.$store.state.isOnline},displayedTransactions:function(){var t=this,e=this.search.query,a=this.search.periodStart,s=this.search.periodEnd,n=this.search.category,i=this.search.subcategory,r=this.transactions;return r.map(function(e){return e.categoryLabel=e.category in t.categoriesAndSubcategoriesLookup?t.categoriesAndSubcategoriesLookup[e.category].label:null,e.categoryIcon=e.category in t.categoriesAndSubcategoriesLookup?t.categoriesAndSubcategoriesLookup[e.category].icon:null,e.subcategoryLabel=e.subcategory in t.categoriesAndSubcategoriesLookup?t.categoriesAndSubcategoriesLookup[e.subcategory].label:null,e.fullname=e.memo?e.memo+" "+e.name:e.name,e}),r.filter(function(t){return(t.note+t.fullname).toLowerCase().indexOf(e.toLowerCase())>-1&new Date(Date.parse(t.datePosted))>=a&new Date(Date.parse(t.datePosted))<=s&(!n||t.category===n)&(!i||t.subcategory===i)})},transactionsCheckedSum:function(){return this.batch.checkedTransactions.length>0?this.batch.checkedTransactions.reduce(function(t,e){return t+e.amount},0):0}},methods:{get:function(){var t=this;if(!this.isLoading){this.isLoading=!0;this.$moment(this.search.periodStart).format("X"),this.$moment(this.search.periodEnd).format("X");this.rTransactions.query({}).then(function(e){t.transactions=e.body,t.transactions.map(function(t){return t.iconUrl=t.iconUrl?t.iconUrl:null,t})},function(t){console.error(t)}).finally(function(){this.isLoading=!1})}},edit:function(t){if(this.batch.isActive){var e=this.batch.checkedTransactions.indexOf(t);e>-1?this.batch.checkedTransactions.splice(e,1):this.batch.checkedTransactions.push(t)}else this.modalTransaction.transaction=t,this.modalTransaction.isActive=!0},downloadData:function(){var t=this,e=JSON.parse(z()(this.displayedTransactions)).map(function(e){for(var a in e.amount=t.$n(e.amount,{style:"decimal",useGrouping:!1}),e.datePosted=t.$moment(e.datePosted).format("L"),e.dateUser=t.$moment(e.dateUser).format("L"),delete e.id,delete e.fitid,delete e.type,delete e.category,delete e.subcategory,delete e.fullname,e)null===e[a]&&(e[a]="");return e});Object(st["a"])({data:e,fileName:"transactions",exportType:st["a"].types.csv,withBOM:!0})},processBatchUpdate:function(){var t=this,e=this.batch.checkedTransactions.length;e>0&&function(){t.batch.isLoading=!0,t.batch.progress=0;var a=0,s=t.batch.category,n=t.batch.subcategory;t.batch.result="";var i=!0,r=!1,o=void 0;try{for(var c,l=function(){var i=c.value;s&&(i.category=s,n&&(i.subcategory=n)),t.rTransactions.update({id:i.id},i).then(function(t){},function(e){e.body.message?t.batch.result+=i.id+" : "+e.body.message+". ":t.batch.result+=i.id+" : "+e.status+" - "+e.statusText+". "}).finally(function(){a++,this.batch.progress=a/e,a===e&&(this.batch.isLoading=!1)})},d=X()(t.batch.checkedTransactions);!(i=(c=d.next()).done);i=!0)l()}catch(u){r=!0,o=u}finally{try{i||null==d.return||d.return()}finally{if(r)throw o}}}()},selectAll:function(){this.batch.checkedTransactions=this.displayedTransactions.slice()},selectNone:function(){this.batch.checkedTransactions=[]}},watch:{"search.category":function(){this.search.subcategory=""},duration:function(){var t=new Date;t.setHours(0,0,0),t.setMilliseconds(0),this.search.periodStart=this.$moment(t).subtract(this.$moment.duration(this.duration)).toDate()}},mounted:function(){var t=this;this.get(),this.getCategories(!0),d["a"].$on("transactions-updated",function(){t.get()}),d["a"].$on("transactions-date-filtered",function(e){t.search.periodStart.getTime()===e.periodStart.getTime()&&t.search.periodEnd.getTime()===e.periodEnd.getTime()||(t.search.periodStart=e.periodStart,t.search.periodEnd=e.periodEnd)})},beforeDestroy:function(){d["a"].$off("transactions-updated"),d["a"].$off("transactions-date-filtered")}},it=nt,rt=Object(f["a"])(it,W,J,!1,null,null,null),ot=rt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isLoaded?a("div",{staticClass:"box"},[a("p",{staticClass:"title"},[t._v(t._s(t.title))]),t.isIndependent?a("div",{staticClass:"field is-grouped is-grouped-multiline is-block-mobile"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.search.duration,expression:"search.duration"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.search,"duration",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"P1W"}},[t._v(t._s(t.$tc("objects.lastWeek",1)))]),a("option",{attrs:{value:"P1M"}},[t._v(t._s(t.$tc("objects.lastMonth",1)))]),a("option",{attrs:{value:"P3M"}},[t._v(t._s(t.$tc("objects.lastMonth",3)))]),a("option",{attrs:{value:"P6M"}},[t._v(t._s(t.$tc("objects.lastMonth",6)))]),a("option",{attrs:{value:"P1Y"}},[t._v(t._s(t.$tc("objects.lastYear",1)))])])])]),a("div",{staticClass:"control"},[a("b-datepicker",{attrs:{placeholder:"Start date",icon:"calendar",editable:"","max-date":t.search.currentDate,required:"",disabled:t.isLoading},model:{value:t.search.periodStart,callback:function(e){t.$set(t.search,"periodStart",e)},expression:"search.periodStart"}})],1),a("div",{staticClass:"control"},[a("b-datepicker",{attrs:{placeholder:"End date",icon:"calendar",editable:"","max-date":t.search.currentDate,required:"",disabled:t.isLoading},model:{value:t.search.periodEnd,callback:function(e){t.$set(t.search,"periodEnd",e)},expression:"search.periodEnd"}})],1),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.search.timeUnit,expression:"search.timeUnit"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.search,"timeUnit",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v(t._s(t.$t("labels.automatic")))]),a("option",{attrs:{value:"D"}},[t._v(t._s(t.$t("labels.daily")))]),a("option",{attrs:{value:"W"}},[t._v(t._s(t.$t("labels.weekly")))]),a("option",{attrs:{value:"M"}},[t._v(t._s(t.$t("labels.monthly")))])])])]),a("div",{staticClass:"control"},[a("button",{staticClass:"button",class:{"is-loading":t.isLoading},attrs:{disabled:t.isLoading},on:{click:t.applyFilter}},[t._m(0),a("span",[t._v(t._s(t.$t("actions.refresh")))])])])]):t._e(),a("line-chart",{attrs:{chartData:t.chartData,labelCallback:t.labelCallback}})],1):t._e()},lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-refresh"})])}],dt=(a("ac6a"),a("1fca")),ut=dt["c"].reactiveProp,pt={extends:dt["a"],mixins:[ut],props:{chartData:{type:Object,required:!0},labelCallback:{type:Function,required:!1},chartOptions:{type:Object,required:!1,default:function(){return{legend:{display:!1},maintainAspectRatio:!1,spanGaps:!1,elements:{line:{tension:1e-6}},plugins:{filler:{propagate:!1}},tooltips:{callbacks:{}},scales:{xAxes:[{type:"time",stacked:!0,ticks:{autoSkip:!1,maxRotation:0},gridLines:{offsetGridLines:!0}}],yAxes:[{id:"y-axis-1",type:"linear",ticks:{}}]}}}}},mounted:function(){var t=this;null!==this.labelCallback&&"function"===typeof this.labelCallback&&(this.chartOptions.tooltips.callbacks={label:this.labelCallback}),this.chartData.datasets.forEach(function(e){"y-axis-2"===e.yAxisID&&t.chartOptions.scales.yAxes.length<2&&t.chartOptions.scales.yAxes.push({id:"y-axis-2",type:"linear",position:"right",ticks:{beginAtZero:!0},gridLines:{drawOnChartArea:!1}})}),this.renderChart(this.chartData,this.chartOptions)},watch:{chartData:function(){this.renderChart(this.chartData,this.chartOptions)}}},mt=pt,bt=Object(f["a"])(mt,s,n,!1,null,null,null),ht=bt.exports,ft={components:{LineChart:ht},props:{title:{type:String,required:!0},chartEndpoint:{type:String,required:!0},isIndependent:{type:Boolean,default:!0,required:!1},date:{required:!1}},data:function(){var t=new Date;return t.setHours(0,0,0),t.setMilliseconds(0),{isLoading:!1,isLoaded:!1,chartData:null,labelCallback:null,search:{duration:"P3M",timeUnit:"",currentDate:t,periodStart:this.$moment(t).subtract(this.$moment.duration("P3M")).toDate(),periodEnd:t}}},methods:{applyFilter:function(){d["a"].$emit("transactions-date-filtered",this.search),this.requestData()},requestData:function(){var t=this;this.isLoading=!0;var e={params:{periodStart:this.$moment(this.search.periodStart).format("X"),periodEnd:this.$moment(this.search.periodEnd).format("X")}};""!==this.search.timeUnit&&(e.params.timeUnit=this.search.timeUnit),this.$http.get(I["a"].API_URL+this.chartEndpoint,{}).then(function(e){var a=t;t.labelCallback=function(t,e){return e.datasets[t.datasetIndex].label+": "+a.$n(e.datasets[t.datasetIndex].data[t.index],"currency")},t.chartData={datasets:[{data:e.data.values.map(function(t){return t.balance}),label:t.$t("labels.balances"),type:"line",backgroundColor:"rgba(0, 0, 0, 0)",borderColor:"rgb(122, 122, 122)",pointBackgroundColor:"rgba(122, 122, 122, 0.8)",radius:2,lineTension:.1,yAxisID:"y-axis-2"},{data:e.data.values.map(function(t){return t.debit}),label:t.$t("labels.debits"),type:"bar",backgroundColor:"rgba(255, 99, 132, 0.7)",borderColor:"rgb(255, 99, 132)",yAxisID:"y-axis-1"},{data:e.data.values.map(function(t){return t.credit}),label:t.$t("labels.credits"),type:"bar",backgroundColor:"rgba(66, 185, 131, 0.7)",borderColor:"rgb(66, 185, 131)",yAxisID:"y-axis-1"}],labels:e.data.values.map(function(e){return t.$moment(e.date)})},t.search.periodStart=t.$moment(e.data.periodStart).toDate(),t.search.periodEnd=t.$moment(e.data.periodEnd).toDate(),t.isLoading=!1,t.isLoaded=!0},function(e){t.isLoading=!1,e.body.message?console.log(e.body.message):console.log(e.status+" - "+e.statusText)})}},watch:{"search.duration":function(){this.search.duration&&d["a"].$emit("transactions-date-filtered",{duration:this.search.duration,timeUnit:this.search.timeUnit,periodStart:this.$moment(this.search.currentDate).subtract(this.$moment.duration(this.search.duration)).toDate(),periodEnd:this.search.currentDate})}},mounted:function(){var t=this;d["a"].$on("transactions-date-filtered",function(e){e.duration&&(t.search.duration=e.duration),t.search.periodStart.getTime()===e.periodStart.getTime()&&t.search.periodEnd.getTime()===e.periodEnd.getTime()&&t.search.timeUnit===e.timeUnit||(t.search.periodStart=e.periodStart,t.search.periodEnd=e.periodEnd,e.timeUnit&&(t.search.timeUnit=e.timeUnit),t.requestData())}),this.date&&(this.search.duration=this.date.duration,this.search.periodStart=this.date.periodStart,this.search.periodEnd=this.date.periodEnd,this.search.timeUnit=this.date.timeUnit),this.requestData()}},gt=ft,vt=Object(f["a"])(gt,ct,lt,!1,null,null,null),yt=vt.exports,Ct={name:"account",components:{Breadcrumb:S["a"],TransactionsHistoryChart:yt,Transactions:ot},data:function(){var t=new Date;return t.setHours(0,0,0),t.setMilliseconds(0),{account:{id:H()(this.$route.params.id),bankId:"",branchId:"",accountId:"",label:"",balance:0,duration:"P3M",iconUrl:null,transactions:[]},icon:{file:null,isUploading:!1,result:null},isLoading:!1,isLoaded:!1,updatedAccount:{},maps:[],upload:{file:null,map:"",isUploading:!1,result:""},date:{timeUnit:"",currentDate:t,duration:"P3M",periodStart:this.$moment(t).subtract(this.$moment.duration("P3M")).toDate(),periodEnd:t},url:I["a"].API_URL+"accounts/"+H()(this.$route.params.id)+"/transactions{/id}",rAccounts:this.$resource(I["a"].API_URL+"accounts{/id}"),rAccountIcons:this.$resource(I["a"].API_URL+"accounts/"+H()(this.$route.params.id)+"/icons"),rMaps:this.$resource(I["a"].API_URL+"maps"),rDatasets:this.$resource(I["a"].API_URL+"accounts/"+H()(this.$route.params.id)+"/dataset")}},computed:{isOnline:function(){return this.$store.state.isOnline},accountTitle:function(){return this.account.label?this.account.label:this.account.bankId+" "+this.account.branchId+" "+this.account.accountId}},methods:{get:function(){var t=this;this.isLoading=!0,this.rAccounts.get({id:this.account.id}).then(function(e){t.account.bankId=e.body.bankId,t.account.branchId=e.body.branchId,t.account.accountId=e.body.accountId,t.account.balance=e.body.balance,t.account.label=e.body.label,t.account.duration=e.body.duration,e.body.iconUrl&&(t.account.iconUrl=e.body.iconUrl),t.updatedAccount=JSON.parse(z()(t.account)),delete t.updatedAccount.transactions,t.date.duration=t.account.duration,t.date.periodStart=t.$moment(t.date.currentDate).subtract(t.$moment.duration(t.account.duration)).toDate(),t.isLoaded=!0},function(e){403!==e.status&&404!==e.status?console.error(e):t.$router.replace({name:"home"})}).finally(function(){this.isLoading=!1})},validateUpdateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.isLoading=!0,t.updatedAccount.balance=R()(t.updatedAccount.balance),t.rAccounts.update({id:t.account.id},t.updatedAccount).then(function(e){t.account.bankId=e.body.bankId,t.account.branchId=e.body.branchId,t.account.accountId=e.body.accountId,t.account.balance=e.body.balance,t.account.label=e.body.label},function(e){e.body.message?t.error=e.body.message:t.error=e.status+" - "+e.statusText}).finally(function(){this.isLoading=!1}))})},uploadIcon:function(){var t=this;this.icon.result="";var e=this.icon.file,a=new FormData;if(a.append("Content-Type",e.type||"application/octet-stream"),a.append("file",e),e.size>8e5)this.icon.result=this.$t("labels.fileTooBig");else{var s={};this.icon.isUploading=!0,this.isLoading=!0,this.account.iconUrl=null,this.rAccountIcons.save(s,a).then(function(e){t.icon.file=null,e.body.iconUrl&&(t.account.iconUrl=I["a"].API_URL+e.body.iconUrl+"?"+t.$moment()),e.body.message&&(t.icon.result=e.body.message)},function(e){e.body.message?t.icon.result=e.body.message:t.icon.result=e.status+" - "+e.statusText}).finally(function(){this.icon.isUploading=!1,this.isLoading=!1})}},deleteAccount:function(){var t=this;this.$dialog.confirm({message:this.$t("labels.deleteAccountMsg"),title:this.$t("labels.deleteAccount"),type:"is-danger",hasIcon:!0,icon:"trash",confirmText:this.$t("actions.deleteAccount"),cancelText:this.$t("actions.cancel"),focusOn:"cancel",onConfirm:function(){t.isLoading=!0,t.rAccounts.delete({id:t.account.id}).then(function(e){t.$router.replace({name:"accounts"})},function(t){console.error(t)}).finally(function(){this.isLoading=!1})}})},getMaps:function(){var t=this;localStorage.getItem("maps")?this.maps=JSON.parse(localStorage.getItem("maps")):this.rMaps.get().then(function(e){t.maps=e.body,localStorage.setItem("maps",z()(t.maps))},function(t){console.error(t)})},uploadDataset:function(){var t=this;this.upload.result="";var e=this.upload.file,a=new FormData;if(a.append("Content-Type",e.type||"application/octet-stream"),a.append("file",e),e.size>8e7)this.upload.result=this.$t("labels.fileTooBig");else{var s={};if("application/json"===e.type){if(!this.upload.map)return void(this.upload.result=this.$t("labels.mapMustBeSet"));s={map:this.upload.map}}this.upload.isUploading=!0,this.isLoading=!0,this.rDatasets.save(s,a).then(function(e){e.body.message&&(t.upload.result=e.body.message),d["a"].$emit("transactions-updated",{})},function(e){e.body.message?t.upload.result=e.body.message:t.upload.result=e.status+" - "+e.statusText}).finally(function(){this.upload.isUploading=!1,this.isLoading=!1})}}},mounted:function(){var t=this;this.get(),this.getMaps(),d["a"].$on("transactions-date-filtered",function(e){t.date.periodStart.getTime()===e.periodStart.getTime()&&t.date.periodEnd.getTime()===e.periodEnd.getTime()&&t.date.timeUnit===e.timeUnit||(t.date.periodStart=e.periodStart,t.date.periodEnd=e.periodEnd,e.timeUnit&&(t.date.timeUnit=e.timeUnit),e.duration&&(t.date.duration=e.duration))})},beforeDestroy:function(){d["a"].$off("transactions-date-filtered")}},_t=Ct,kt=Object(f["a"])(_t,N,q,!1,null,null,null),$t=kt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero is-light is-fullheight login"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container has-text-centered"},[a("div",{staticClass:"column is-4 is-offset-4"},[a("div",{staticClass:"box"},[a("form",[a("h3",{staticClass:"title has-text-grey"},[t._v(t._s(t.$t("actions.login")))]),a("p",{staticClass:"subtitle has-text-grey"},[t._v(t._s(t.$t("labels.login")))]),a("div",{staticClass:"field"},[a("div",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.login,expression:"credentials.login"},{name:"validate",rawName:"v-validate",value:"required|min:3|alpha",expression:"'required|min:3|alpha'"}],staticClass:"input is-medium",class:{input:!0,"is-danger":t.errors.has("login")},attrs:{type:"text",name:"login",placeholder:t.$t("fieldnames.login")},domProps:{value:t.credentials.login},on:{input:function(e){e.target.composing||t.$set(t.credentials,"login",e.target.value)}}}),t._m(0),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"icon is-small is-right"},[a("i",{staticClass:"fa fa-exclamation-triangle"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("login")))])])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input is-medium",class:{input:!0,"is-danger":t.errors.has("password")},attrs:{type:"password",name:"password",placeholder:t.$t("fieldnames.password")},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),t._m(1),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"icon is-small is-right"},[a("i",{staticClass:"fa fa-exclamation-triangle"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("password")))])])]),a("div",{staticClass:"field"},[a("button",{staticClass:"button is-block is-primary is-medium is-fullwidth",class:{"is-loading":t.isLoading},attrs:{disabled:t.isDisabled},on:{click:t.submit}},[a("span",{staticClass:"fa fa-sign-in fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("actions.login")))])]),t.error?a("div",{staticClass:"message is-danger"},[a("div",{staticClass:"message-body"},[t._v("\n                "+t._s(t.error)+"\n              ")])]):t._e()])])])])])])},At=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-user"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-lock"})])}],It={data:function(){return{credentials:{login:"",password:""},isLoading:!1,error:""}},computed:{isOnline:function(){return this.$store.state.isOnline},isDisabled:function(){return!this.isOnline||this.isLoading||this.errors.any()}},methods:{submit:function(t){var e=this;t.preventDefault(),this.$validator.validateAll().then(function(t){if(t){e.isLoading=!0;var a={login:e.credentials.login,password:e.credentials.password};if(e.errors.count()>0||""===a.login||""===a.password)return;l["a"].login(e,a,e.$router.currentRoute.query.redirect)}})}}},St=It,xt=(a("039a"),Object(f["a"])(St,wt,At,!1,null,null,null)),Tt=xt.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero"},[a("div",{staticClass:"hero-head"},[a("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:this.$t("labels.home"),isActive:!0}]}})],1),a("div",{staticClass:"hero-body"},[a("div",{staticClass:"section no-padding-parent-mobile"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns no-padding-parent-mobile is-multiline"},[a("div",{staticClass:"column no-padding-mobile is-full"},[a("transactions-history-chart",{attrs:{title:t.$t("labels.transactionsByDay"),chartEndpoint:"transactions/history",isIndependent:!0,date:t.date}})],1),a("div",{staticClass:"column no-padding-mobile is-one-half-desktop"},[a("transactions-distribution-chart",{attrs:{title:t.$t("labels.incomeDistribution"),chartEndpoint:"transactions/distribution/credit/categories",isIndependent:!1,date:t.date}})],1),a("div",{staticClass:"column no-padding-mobile is-one-half-desktop"},[a("transactions-distribution-chart",{attrs:{title:t.$t("labels.expenseDistribution"),chartEndpoint:"transactions/distribution/debit/categories",isIndependent:!1,date:t.date}})],1),t.categorySelected.key?a("div",{staticClass:"column no-padding-mobile is-full"},[a("transactions-history-chart",{attrs:{title:t.$t("labels.transactionsByDay")+" "+t.$t("labels.for")+" "+t.categorySelected.label,chartEndpoint:"transactions/history?category="+t.categorySelected.key,isIndependent:!1,date:t.date}})],1):t._e(),t.categorySelected.key?a("div",{staticClass:"column no-padding-mobile is-one-half-desktop"},[a("transactions-distribution-chart",{attrs:{title:t.$t("labels.incomeDistribution")+" "+t.$t("labels.for")+" "+t.categorySelected.label,chartEndpoint:"transactions/distribution/credit/subcategories?value="+t.categorySelected.key,isIndependent:!1,date:t.date}})],1):t._e(),t.categorySelected.key?a("div",{staticClass:"column no-padding-mobile is-one-half-desktop"},[a("transactions-distribution-chart",{attrs:{title:t.$t("labels.expenseDistribution")+" "+t.$t("labels.for")+" "+t.categorySelected.label,chartEndpoint:"transactions/distribution/debit/subcategories?value="+t.categorySelected.key,isIndependent:!1,date:t.date}})],1):t._e(),t.subcategorySelected.key?a("div",{staticClass:"column no-padding-mobile is-full"},[a("transactions-history-chart",{attrs:{title:t.$t("labels.transactionsByDay")+" "+t.$t("labels.for")+" "+t.subcategorySelected.label,chartEndpoint:"transactions/history?subcategory="+t.subcategorySelected.key,isIndependent:!1,date:t.date}})],1):t._e()])])]),a("div",{staticClass:"container box"},[a("h1",{staticClass:"title"},[t._v(t._s(t.$tc("objects.transaction",2)))]),a("transactions",{attrs:{url:t.url,displayAccount:!0}})],1)])])},jt=[],Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isLoaded?a("div",{staticClass:"box"},[a("p",{staticClass:"title"},[t._v(t._s(t.title))]),t.isIndependent?a("div",{staticClass:"field is-grouped is-grouped-multiline is-block-mobile"},[a("div",{staticClass:"control"},[a("b-datepicker",{attrs:{placeholder:"Start date",icon:"calendar",editable:"","max-date":t.search.currentDate,required:"",disabled:t.isLoading},model:{value:t.search.periodStart,callback:function(e){t.$set(t.search,"periodStart",e)},expression:"search.periodStart"}})],1),a("div",{staticClass:"control"},[a("b-datepicker",{attrs:{placeholder:"End date",icon:"calendar",editable:"","max-date":t.search.currentDate,required:"",disabled:t.isLoading},model:{value:t.search.periodEnd,callback:function(e){t.$set(t.search,"periodEnd",e)},expression:"search.periodEnd"}})],1),a("div",{staticClass:"control"},[a("button",{staticClass:"button",class:{"is-loading":t.isLoading},attrs:{disabled:t.isLoading},on:{click:t.applyFilter}},[t._m(0),a("span",[t._v(t._s(t.$t("actions.refresh")))])])])]):t._e(),a("doughnut",{attrs:{chartData:t.chartData,options:t.options}})],1):t._e()},Et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-refresh"})])}],Lt=a("5b20"),Ut=a.n(Lt);Ut.a.defaults.global.defaultFontFamily='"FontAwesome", "Helvetica Neue", "Helvetica", "Arial", sans-serif';var Mt,Ot,Nt=dt["c"].reactiveProp,qt={extends:dt["b"],mixins:[Nt],props:{chartData:{type:Object,required:!0},options:{type:Object,required:!0}},mounted:function(){this.renderChart(this.chartData,this.options)},watch:{chartData:function(){this.renderChart(this.chartData,this.options)}}},Bt=qt,Rt=Object(f["a"])(Bt,Mt,Ot,!1,null,null,null),Gt=Rt.exports,zt={components:{Doughnut:Gt},mixins:[K["a"]],props:{title:{type:String,required:!0},chartEndpoint:{type:String,required:!0},date:{required:!1},isIndependent:{type:Boolean,default:!0,required:!1}},data:function(){var t=new Date;return t.setHours(0,0,0),t.setMilliseconds(0),{isLoading:!1,isLoaded:!1,chartData:null,options:null,search:{currentDate:t,periodStart:new Date(t.getFullYear(),t.getMonth(),t.getDate()-30),periodEnd:t}}},methods:{applyFilter:function(){d["a"].$emit("transactions-date-filtered",this.search),this.requestData()},requestData:function(){var t=this;this.isLoading=!0;this.$moment(this.search.periodStart).format("X"),this.$moment(this.search.periodEnd).format("X");this.$http.get(I["a"].API_URL+this.chartEndpoint,{}).then(function(e){var a,s=e.data.values,n=["#42b983","#292f36","#4ecdc4","#0b3954","#ff6663","#7d7c84","#7180ac","#2b4570","#c84630","#81a684","#466060","#c9cba3","#e26d5c","#2a4747","#157a6e","#ee6c4d"],i=s.length;if("debit"===e.data.type){n=[];for(var r=0;r<i;r++)a=61+r/i*39,n.push("hsla(348, 100%, "+a+"%, 1)")}else if("credit"===e.data.type){n=[];for(var o=0;o<i;o++)a=49+o/i*41,n.push("hsla(153, 47%, "+a+"%, 1)")}var c=null;"categories"===e.data.key?c=function(t){var e=this.chart.getElementsAtEvent(t)[0];if(e){var a=s[e._index].key;a&&d["a"].$emit("category-selected",{key:a,label:this.chart.data.labels[e._index].replace(/[^ -~]+ /g,"")})}}:"subcategories"===e.data.key&&(c=function(t){var e=this.chart.getElementsAtEvent(t)[0];if(e){var a=s[e._index].key;a&&d["a"].$emit("subcategory-selected",{key:a,label:this.chart.data.labels[e._index]})}});var l,u=t,p=function(t,e){var a=e.datasets[t.datasetIndex].data.reduce(function(t,e){return t+e},0),s=e.datasets[t.datasetIndex].data[t.index],n=e.labels[t.index].replace(/[^ -~]+ /g,"");return n+": "+u.$n(s,"currency")+" ("+Math.round(100*s/a)+"%)"};t.chartData={datasets:[{backgroundColor:n,data:s.map(function(t){return t.amount})}]},l="categories"===e.data.key||"subcategories"===e.data.key?s.map(function(e){var a="";if(t.categoriesAndSubcategoriesLookup[e.key]){if(t.categoriesAndSubcategoriesLookup[e.key].icon){var s=t.categoriesAndSubcategoriesLookup[e.key].icon,n=document.createElement("i");n.className=s,document.body.appendChild(n),a=window.getComputedStyle(n,":before").content.replace(/'|"/g,"")+" ",n.remove()}return a+t.categoriesAndSubcategoriesLookup[e.key].label}return null===e.key?t.$t("labels.uncategorizedTransaction"):e.key}):s.map(function(t){return t.key}),t.chartData.labels=l,t.options={legend:{display:!0},responsive:!0,maintainAspectRatio:!1,tooltips:{callbacks:{label:p}},onClick:c},t.search.periodStart=t.$moment(e.data.periodStart).toDate(),t.search.periodEnd=t.$moment(e.data.periodEnd).toDate(),t.isLoading=!1,t.isLoaded=!0},function(e){t.isLoading=!1,e.body.message?console.log(e.body.message):console.log(e.status+" - "+e.statusText)})}},mounted:function(){var t=this;d["a"].$on("transactions-date-filtered",function(e){t.search.periodStart.getTime()===e.periodStart.getTime()&&t.search.periodEnd.getTime()===e.periodEnd.getTime()||(t.search.periodStart=e.periodStart,t.search.periodEnd=e.periodEnd,t.requestData())}),this.getCategories(!0),this.date&&(this.search.periodStart=this.date.periodStart,this.search.periodEnd=this.date.periodEnd),this.requestData()}},Ft=zt,Ht=Object(f["a"])(Ft,Dt,Et,!1,null,null,null),Wt=Ht.exports,Jt={name:"home",components:{Breadcrumb:S["a"],TransactionsDistributionChart:Wt,TransactionsHistoryChart:yt,Transactions:ot},data:function(){var t=new Date;return t.setHours(0,0,0),t.setMilliseconds(0),{categorySelected:{key:null},subcategorySelected:{key:null},url:I["a"].API_URL+"transactions{/id}",date:{timeUnit:"",duration:"P3M",periodStart:this.$moment(t).subtract(this.$moment.duration("P3M")).toDate(),periodEnd:t}}},mounted:function(){var t=this;d["a"].$on("category-selected",function(e){t.categorySelected.key&&t.categorySelected.key===e.key||(t.categorySelected.key=null,t.$nextTick(function(){this.categorySelected=e}))}),d["a"].$on("subcategory-selected",function(e){t.subcategorySelected.key&&t.subcategorySelected.key===e.key||(t.subcategorySelected.key=null,t.$nextTick(function(){this.subcategorySelected=e}))}),d["a"].$on("transactions-date-filtered",function(e){t.date.periodStart.getTime()===e.periodStart.getTime()&&t.date.periodEnd.getTime()===e.periodEnd.getTime()&&t.date.timeUnit===e.timeUnit||(t.date.periodStart=e.periodStart,t.date.periodEnd=e.periodEnd,e.timeUnit&&(t.date.timeUnit=e.timeUnit),e.duration&&(t.date.duration=e.duration))})},beforeDestroy:function(){d["a"].$off("category-selected"),d["a"].$off("transactions-date-filtered")}},Yt=Jt,Xt=(a("8b71"),Object(f["a"])(Yt,Pt,jt,!1,null,null,null)),Vt=Xt.exports;i["default"].use($["a"]);var Zt=new $["a"]({routes:[{path:"/",name:"home",component:Vt,meta:{title:"Home"}},{path:"/setup",name:"setup",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("user-settings")]).then(a.bind(null,"dc4a"))},meta:{title:"Setup server"}},{path:"/about",name:"about",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("user-settings")]).then(a.bind(null,"84ba"))},meta:{title:"About"}},{path:"/accounts",name:"accounts",component:O,meta:{title:"Accounts"}},{path:"/accounts/:id",name:"account",component:$t,meta:{transitionName:"slide",title:"Account :id"}},{path:"/login",name:"login",component:Tt,meta:{title:"Login"}},{path:"/profile",name:"profile",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("user-settings")]).then(a.bind(null,"66aa"))},meta:{title:"Profile"}},{path:"/patterns",name:"patterns",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("user-settings")]).then(a.bind(null,"dca5"))},meta:{title:"Patterns"}},{path:"/users",name:"users",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("system-settings")]).then(a.bind(null,"dbef"))},meta:{title:"Manage users"}},{path:"/maps",name:"maps",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("system-settings")]).then(a.bind(null,"c00d"))},meta:{title:"Edit maps"}},{path:"/maps/new",name:"newMap",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("system-settings")]).then(a.bind(null,"a0be"))},props:{isNew:!0},meta:{transitionName:"slide",title:"Edit map :code"}},{path:"/maps/:code",name:"map",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("system-settings")]).then(a.bind(null,"a0be"))},props:{isNew:!1},meta:{transitionName:"slide",title:"Edit map :code"}},{path:"/categories",name:"categories",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("system-settings")]).then(a.bind(null,"1d9f"))},meta:{title:"Edit categories and subcategories"}},{path:"/categories/:id",name:"category",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("system-settings")]).then(a.bind(null,"0d32"))},props:{isCategory:!0},meta:{transitionName:"slide",title:"Edit category :id"}},{path:"/categories/:pid/subcategories/:id",name:"subcategory",component:function(){return Promise.all([a.e("system-settings~user-settings"),a.e("system-settings")]).then(a.bind(null,"0d32"))},props:{isCategory:!1},meta:{transitionName:"slide",title:"Edit subcategory :id"}}]}),Kt=a("9483");Object(Kt["a"])("".concat("/own-my-money/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var Qt=a("a925"),te={en:{fieldnames:{login:"Login",password:"Password",newPassword:"New password",email:"Email address",amount:"Amount",date:"Date",bankIdentifier:"Bank identifier",branchIdentifier:"Branch identifier",accountIdentifier:"Account identifier",code:"Code",label:"Label",duration:"Duration",note:"Note",memo:"Memo",dateFormat:"Date format",datePosted:"Date posted",dateUser:"Date user",transactionId:"Transaction id",status:"Status",parent:"Parent",icon:"Icon",isBudgeted:"Budgeted",ipAddress:"IP address",userAgent:"User agent",admin:"Admin",language:"Language",balance:"Balance",updated:"Updated"},actions:{login:"Login",edit:"Edit",save:"Save",create:"Create",update:"Update",cancel:"Cancel",delete:"Delete",apply:"Apply",refresh:"Refresh",selectAll:"Select all",clear:"Clear",next:"Next",addCategory:"Add a category",addSubcategory:"Add a subcategory",editCategory:"Edit category",addPattern:"Add pattern",suggestPatterns:"Suggest patterns",deletePattern:"Delete pattern",addMap:"Add a map",addUser:"Add user",deleteMap:"Delete mapping",addAccount:"Add account",deleteAccount:"Delete account",download:"Download",uploadOfxJson:"Upload OFX/JSON",uploadOfx:"Upload OFX",uploadIcon:"Upload icon",updateTo:"Update to"},labels:{login:"Access to your OwnMyMoney account",home:"Home",language:"Language",systemSettings:"System settings",profile:"Profile",about:"About",reportABug:"Report a bug",logout:"Logout",active:"Active",disabled:"Disabled",searchTransactions:"Search transactions",findATransaction:"Find a transaction",batchUpdates:"Batch updates",patternsLabel:"Automatic categorization",categoriesLabel:"Click to edit category or subcategory or add new one",mapsLabel:"Click to edit transaction mapping or add new one",mapLabel:"Edit transaction mapping",profileLabel:"Update your Money account",transactionsByDay:"Transaction history",incomeDistribution:"Income distribution",expenseDistribution:"Expense distribution",nothingToDisplay:"There is nothing to display",nothingToDo:"There is nothing to do",deleteAccount:"Delete account",deleteAccountMsg:"Are you sure you want to delete this account?<br>All transactions will be deleted too.",noAccount:"There is no account yet",fileTooBig:"File too big",mapMustBeSet:"Map must be set for uploading a JSON file",deleteMap:"Deleting mapping",deleteMapMsg:"Are you sure you want to delete this mapping?",deletePattern:"Deleting pattern",deletePatternMsg:"Are you sure you want to delete this pattern?",patternWildcardHelper:"Wildcard character * is allowed",for:"for",typeJsonAttribute:"Type the JSON attribute",isBudgeted:"Included in budget",isNotBudgeted:"Excluded from the budget",isBudgetedHelp:"Transactions from off-budget categories does not appear in charts",uncategorizedTransaction:"Uncategorized",debits:"Debits",credits:"Credits",balances:"Balances",automatic:"Automatic",daily:"Daily",weekly:"Weekly",monthly:"Monthly",isOnline:"You are back online",isOffline:"You are offline",aboutText:'<p>Own my money is a simple way to track your bank activity on any device connected to the web (pc, smartphone, tablet, ...).</p><p>If you have any issues or feature requests, please create an <a href="https://github.com/nioc/own-my-money/issues" target="_blank">issue</a>.</p><p>This project is licensed under the <a href="https://www.gnu.org/licenses/quick-guide-gplv3.html" target="_blank">GNU Affero General Public License v3.0</a>.</p>'},objects:{account:"Account | Accounts",category:"Category | Categories",subcategory:"Subcategory | Subcategories",transaction:"Transaction | Transactions",transactionsSelected:"No transaction selected | 1 transaction selected | {count} transactions selected",transactionMapping:"Transaction mapping",user:"User | Users",pattern:"Pattern | Patterns",occurence:"Occurence | Occurence | Occurences",lastDay:"Last day | Last {count} days",lastWeek:"Last week | Last {count} weeks",lastMonth:"Last month | Last {count} months",lastYear:"Last year | Last {count} years",byte:"1 byte | {count} bytes"}},fr:{fieldnames:{login:"Identifiant",password:"Password",newPassword:"Nouveau password",email:"Adresse email",amount:"Montant",date:"Date",bankIdentifier:"Établissement",branchIdentifier:"Guichet",accountIdentifier:"Numéro de compte",code:"Code",label:"Libellé",duration:"Durée",note:"Note",memo:"Mémo",dateFormat:"Format de date",datePosted:"Date de valeur",dateUser:"Date utilisateur",transactionId:"Id transaction",status:"Statut",parent:"Parent",icon:"Icône",isBudgeted:"Budgeté",ipAddress:"Adresse IP",userAgent:"User agent",admin:"Admin",language:"Langue",balance:"Solde",updated:"Mise à jour"},actions:{login:"Connexion",edit:"Modifier",save:"Enregistrer",create:"Créer",update:"Mettre à jour",cancel:"Annuler",delete:"Supprimer",apply:"Appliquer",refresh:"Rafraîchir",selectAll:"Tout sélectionner",clear:"Vider",next:"Suivant",addCategory:"Ajouter une catégorie",addSubcategory:"Ajouter une sous-catégorie",editCategory:"Modifier une catégorie",addPattern:"Ajouter un modèle",suggestPatterns:"Suggérer des modèles",deletePattern:"Supprimer le modèle",addMap:"Ajouter une correspondance",addUser:"Ajouter un utilisateur",deleteMap:"Supprimer la correspondance",addAccount:"Ajouter un compte",deleteAccount:"Supprimer le compte",download:"Télécharger",uploadOfxJson:"Téléverser OFX/JSON",uploadOfx:"Téléverser OFX",uploadIcon:"Téléverser icône",updateTo:"Mise à jour vers"},labels:{login:"Accéder à votre compte OwnMyMoney",home:"Accueil",language:"Langue",systemSettings:"Paramètres système",profile:"Profil",about:"À propos",reportABug:"Signaler un bug",logout:"Déconnexion",active:"Actif",disabled:"Désactivé",searchTransactions:"Recherche de transactions",findATransaction:"Rechercher une transaction",batchUpdates:"Modification par lot",patternsLabel:"Classification automatique",categoriesLabel:"Cliquer pour éditer une catégorie ou sous-catégorie ou en créer une nouvelle",mapsLabel:"Cliquer pour editer une correspondance de transaction ou en créer une nouvelle",mapLabel:"Editer la correspondance de transaction",profileLabel:"Mise à jour de votre compte Money",transactionsByDay:"Historique des transactions",incomeDistribution:"Répartition des revenus",expenseDistribution:"Répartition des dépenses",nothingToDisplay:"Il n'y a rien à afficher",nothingToDo:"Il n'y a rien à faire",deleteAccount:"Supprimer le compte",deleteAccountMsg:"Etes vous sûr de vouloir supprimer ce compte ?<br>Toutes ses transactions seront supprimées également.",noAccount:"Il n'y a pas encore de compte",fileTooBig:"Le fichier est trop volumineux",mapMustBeSet:"La map doit être selectionnée pour envoyer un fichier JSON",deleteMap:"Supprimer la correspondance",deleteMapMsg:"Etes vous sûr de vouloir supprimer cette correspondance ?",deletePattern:"Supprimer le modèle",deletePatternMsg:"Etes vous sûr de vouloir supprimer ce modèle ?",patternWildcardHelper:"Le caractère joker * est autorisé",for:"pour",typeJsonAttribute:"Saisir l'attribut du fichier JSON",isBudgeted:"Inclus dans le budget",isNotBudgeted:"Hors budget",isBudgetedHelp:"Les transactions des catégories hors budget n'apparaissent pas dans les graphiques",uncategorizedTransaction:"Non classé",debits:"Débits",credits:"Crédits",balances:"Soldes",automatic:"Automatique",daily:"Par jour",weekly:"Par semaine",monthly:"Par mois",isOnline:"Vous êtes à nouveau connecté",isOffline:"Vous êtes hors-ligne",aboutText:'<p>Own my money est un outil pour suivre facilement votre activité bancaire depuis n\'importe quel équipement connecté à internet (pc, smartphone, tablette, ...).</p><p>En cas de problème ou pour toute suggestion, merci de créer un <a href="https://github.com/nioc/own-my-money/issues" target="_blank">ticket</a>.</p><p>Ce projet est sous la licence <a href="https://www.gnu.org/licenses/quick-guide-gplv3.html" target="_blank">GNU Affero General Public License v3.0</a>.</p>'},objects:{account:"Compte | Comptes",category:"Catégorie | Catégories",subcategory:"Sous-catégorie | Sous-catégories",transaction:"Transaction | Transactions",transactionsSelected:"Aucune transaction sélectionnée | 1 transaction sélectionnée | {count} transactions sélectionnées",transactionMapping:"Correspondance de transactions | Correspondances de transactions",user:"Utilisateur | Utilisateurs",pattern:"Modèle | Modèles",occurence:"Occurence | Occurence | Occurences",lastDay:"le jour dernier | Les {count} derniers jours",lastWeek:"La semaine dernière | Les {count} dernières semaines",lastMonth:"Le mois dernier | Les {count} derniers mois",lastYear:"L'année dernière | Les {count} dernières années",byte:"1 octet | {count} octets"}}},ee={"en-US":{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",hour12:!0}},"fr-FR":{short:{year:"numeric",month:"long",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"}}},ae={en:{currency:{style:"currency",currency:"GBP"}},"en-US":{currency:{style:"currency",currency:"USD"}},fr:{currency:{style:"currency",currency:"EUR"}}},se=a("2ead"),ne=a.n(se),ie=(a("9f26"),a("243b")),re=a.n(ie),oe=a("8f76"),ce=a.n(oe),le=a("28dd"),de=a("7bb1"),ue=a("8a03"),pe=a.n(ue),me=(a("1f54"),a("2fc4"),a("59df"),a("55dd"),{install:function(t,e){function a(e){return t.moment().subtract(t.moment.duration(e)).format()}var s=[{id:1,aid:1,type:"CREDIT",datePosted:a("P3D"),dateUser:a("P3D"),amount:342,name:"SUNSHINE AUTOS IMPORT GARAGE",fitid:"5387240011638",memo:"",category:3,subcategory:33,note:"Car selling"},{id:10,aid:1,type:"DEBIT",datePosted:a("P4D"),dateUser:a("P4D"),amount:-60.5,name:"ARROW GASOLINE",fitid:"5387600307180",memo:"",category:1,subcategory:12,note:"Gasoil"},{id:2,aid:1,type:"DEBIT",datePosted:a("P4D"),dateUser:a("P4D"),amount:-39.85,name:"LOS SANTOS CUSTOMS",fitid:"5387600307178",memo:"",category:1,subcategory:14,note:"Wheels"},{id:3,aid:1,type:"DEBIT",datePosted:a("P5D"),dateUser:a("P5D"),amount:-17,name:"PIZZA THIS",fitid:"5387600307179",memo:"",category:2,subcategory:20,note:"Lunch with Trevor"},{id:5,aid:1,type:"CREDIT",datePosted:a("P6D"),dateUser:a("P6D"),amount:300,name:"MERRYWEATHER SECURITY",fitid:"5387600307179",memo:"",category:3,subcategory:32,note:""},{id:9,aid:1,type:"DEBIT",datePosted:a("P6D"),dateUser:a("P6D"),amount:-39.99,name:"MORS MUTUAL INSURANCE",fitid:"5387600307180",memo:"",category:1,subcategory:13,note:""},{id:6,aid:1,type:"CREDIT",datePosted:a("P8D"),dateUser:a("P8D"),amount:200,name:"TRANSFER FROM L. CREST",fitid:"5387600307180",memo:"",category:3,subcategory:32,note:"Mission success"},{id:8,aid:1,type:"DEBIT",datePosted:a("P8D"),dateUser:a("P8D"),amount:-99,name:"VANILLA UNICORN",fitid:"5387600307179",memo:"",category:2,subcategory:null,note:""},{id:4,aid:1,type:"DEBIT",datePosted:a("P15D"),dateUser:a("P15D"),amount:-28.5,name:"PONSONBY",fitid:"5387600307180",memo:"",category:5,subcategory:51,note:"hats"},{id:9,aid:1,type:"DEBIT",datePosted:a("P18D"),dateUser:a("P18D"),amount:-60.5,name:"ARROW GASOLINE",fitid:"5387600307180",memo:"",category:1,subcategory:12,note:"Gasoil"},{id:7,aid:1,type:"DEBIT",datePosted:a("P20D"),dateUser:a("P20D"),amount:-250,name:"PEGASUS",fitid:"5387600307178",memo:"",category:1,subcategory:14,note:""},{id:9,aid:1,type:"DEBIT",datePosted:a("P21D"),dateUser:a("P21D"),amount:-60.5,name:"O SHEAS BARBERS SHOP",fitid:"5387600307181",memo:"",category:5,subcategory:null,note:""},{id:9,aid:1,type:"CREDIT",datePosted:a("P22D"),dateUser:a("P22D"),amount:210,name:"SUNSHINE AUTOS IMPORT GARAGE",fitid:"5387600307180",memo:"",category:3,subcategory:33,note:"Car selling"},{id:9,aid:2,type:"CREDIT",datePosted:a("P21D"),dateUser:a("P21D"),amount:100,name:"DEPOSIT",fitid:"5387600307190",memo:"",category:3,subcategory:32,note:""},{id:9,aid:2,type:"DEBIT",datePosted:a("P16D"),dateUser:a("P16D"),amount:-19.99,name:"WITHDRAW",fitid:"5387600307191",memo:"",category:2,subcategory:21,note:""}],n=[{id:1,user:"1",bankId:"14000",branchId:"00170",accountId:"02437797004",label:"Maze Bank",duration:"P3M",iconUrl:"./img/accounts-1-icons.png",balance:1635,lastUpdate:a("PT4H")},{id:2,user:"1",bankId:"17000",branchId:"00360",accountId:"07894688002",label:"Fleeca",duration:"P3M",iconUrl:"./img/accounts-2-icons.png",balance:201,lastUpdate:a("P3D")}];function i(t,e){return t.reduce(function(t,a){var s=a[e];return t[s]||(t[s]=[]),t[s].push(a),t},{})}var r=[];function o(e,a){var s=[],n=i(e,"datePosted");for(var r in n){var o=i(n[r],"type"),c="DEBIT"in o?o["DEBIT"].reduce(function(t,e){return t+e.amount},0):0,l="CREDIT"in o?o["CREDIT"].reduce(function(t,e){return t+e.amount},0):0;s.push({date:t.moment(r).format("YYYY-MM-DD"),debit:c,credit:l})}var d=t.moment().subtract(t.moment.duration("P1M")),u=t.moment(),p=d,m=s.length;while(p<=u){for(var b=!1,h=0;h<m;h++)if(s[h].date===p.format("YYYY-MM-DD")){b=!0;break}b||s.push({date:t.moment(p).format("YYYY-MM-DD"),debit:0,credit:0}),p.add(1,"days")}for(var f in s.sort(function(e,a){return t.moment(a.date)-t.moment(e.date)}),s){var g=s[f];g.balance=a,a-=g.credit-g.debit}return s.sort(function(e,a){return t.moment(e.date)-t.moment(a.date)}),s}for(var c=i(s,"type"),l=i(c["DEBIT"],"category"),d=i(c["CREDIT"],"category"),u=[],p=[],m=[],b=[],h=i(s,"category"),f=1;f<6;f++)m[f]=[],b[f]=[],r[f]=[],h[f]&&(r[f]=o(h[f]));for(var g in l){u.push({key:g,amount:Math.abs(l[g].reduce(function(t,e){return t+e.amount},0))});var v=i(l[g],"subcategory");for(var y in v)m[g].push({key:y,amount:Math.abs(v[y].reduce(function(t,e){return t+e.amount},0))})}for(var C in d){p.push({key:C,amount:Math.abs(d[C].reduce(function(t,e){return t+e.amount},0))});var _=i(d[C],"subcategory");for(var k in _)b[C].push({key:k,amount:Math.abs(_[k].reduce(function(t,e){return t+e.amount},0))})}var $=[{method:"POST",url:"users/tokens",response:{token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJtb25leSIsImV4cCI6MTc2MzEwNDEwMCwic3ViIjoxLCJsb2dpbiI6Ik1pY2hhZWwiLCJzdGF0dXMiOnRydWUsIm1haWwiOiJtQGV5ZWZpbmQuaW5mbyIsInNjb3BlIjoidXNlciBhZG1pbiIsImxhbmd1YWdlIjoiZW4ifQ.vAPx5Bd2bduUFF6s4gplFwQKCDgCAEjJHTU4qnltUkw"}},{method:"GET",url:"users",response:[{sub:1,login:"Michael",status:!0,mail:"m@eyefind.info",scope:"user admin"},{sub:2,login:"Trevor",status:!1,mail:"tpi@eyefind.info",scope:"user"},{sub:3,login:"Franklin",status:!0,mail:"frankie@eyefind.info",scope:"user"}]},{method:"PUT",url:"users/1",response:{sub:1,login:"Michael",status:!0,mail:"m@eyefind.info",scope:"user admin"}},{method:"PUT",url:"users/2",response:{sub:1,login:"Trevor",status:!1,mail:"tpi@eyefind.info",scope:"user"}},{method:"PUT",url:"users/3",response:{sub:1,login:"Franklin",status:!0,mail:"frankie@eyefind.info",scope:"user"}},{method:"GET",url:"users/1/tokens",response:[{creation:a("P1D"),ip:"10.0.0.2",userAgent:"Mozilla/5.0 (X11; Linux x86_64; rv:63.0) Gecko/20100101 Firefox/63.0"},{creation:a("PT41242M"),ip:"10.0.0.13",userAgent:"Mozilla/5.0 (Android 8.0.0; Mobile; rv:63.0) Gecko/63.0 Firefox/63.0"},{creation:a("PT1044887S"),ip:"10.0.0.14",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53"}]},{method:"GET",url:"transactions",response:s.map(function(t){return t.iconUrl="accounts-"+t.aid+"-icons.png",t.accountLabel=n[t.aid-1].label,t})},{method:"GET",url:"transactions/history",response:{values:o(s,n.reduce(function(t,e){return t+e.balance},0)),periodStart:a("P1M"),periodEnd:a("PT1S")}},{method:"GET",url:"transactions/distribution/credit/categories",response:{values:p,periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"credit",key:"categories"}},{method:"GET",url:"transactions/distribution/debit/categories",response:{values:u,periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"debit",key:"categories"}},{method:"GET",url:"transactions/distribution/credit/subcategories?value=1",response:{values:b[1],periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"credit",key:"subcategories"}},{method:"GET",url:"transactions/distribution/debit/subcategories?value=1",response:{values:m[1],periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"debit",key:"subcategories"}},{method:"GET",url:"transactions/history?category=1",response:{values:r[1],periodStart:a("P1M"),periodEnd:a("PT1S")}},{method:"GET",url:"transactions/distribution/credit/subcategories?value=2",response:{values:b[2],periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"credit",key:"subcategories"}},{method:"GET",url:"transactions/distribution/debit/subcategories?value=2",response:{values:m[2],periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"debit",key:"subcategories"}},{method:"GET",url:"transactions/history?category=2",response:{values:r[2],periodStart:a("P1M"),periodEnd:a("PT1S")}},{method:"GET",url:"transactions/distribution/credit/subcategories?value=3",response:{values:b[3],periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"credit",key:"subcategories"}},{method:"GET",url:"transactions/distribution/debit/subcategories?value=3",response:{values:m[3],periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"debit",key:"subcategories"}},{method:"GET",url:"transactions/history?category=3",response:{values:r[3],periodStart:a("P1M"),periodEnd:a("PT1S")}},{method:"GET",url:"transactions/distribution/credit/subcategories?value=5",response:{values:b[5],periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"credit",key:"subcategories"}},{method:"GET",url:"transactions/distribution/debit/subcategories?value=5",response:{values:m[5],periodStart:t.moment().subtract(t.moment.duration("P1M")),periodEnd:t.moment(),type:"debit",key:"subcategories"}},{method:"GET",url:"transactions/history?category=5",response:{values:r[5],periodStart:a("P1M"),periodEnd:a("PT1S")}},{method:"GET",url:"accounts",response:n},{method:"GET",url:"accounts/1",response:n[0]},{method:"GET",url:"accounts/2",response:n[1]},{method:"GET",url:"accounts/1/transactions",response:s.filter(function(t){return 1===t.aid}).map(function(t){return t.iconUrl="./img/accounts-1-icons.png",t})},{method:"GET",url:"accounts/1/transactions/history",response:{values:o(s.filter(function(t){return 1===t.aid}),n[0].balance),periodStart:a("P1M"),periodEnd:a("PT1S")}},{method:"GET",url:"accounts/2/transactions",response:s.filter(function(t){return 2===t.aid}).map(function(t){return t.iconUrl="./img/accounts-2-icons.png",t})},{method:"GET",url:"accounts/2/transactions/history",response:{values:o(s.filter(function(t){return 2===t.aid}),n[1].balance),periodStart:a("P1M"),periodEnd:a("PT1S")}},{method:"GET",url:"setup/versions/latest",response:{installed:"0.8.0",latest:"0.8.0"}},{method:"GET",url:"categories",response:[{id:1,label:"Transports",status:!0,icon:"fa-train",isBudgeted:!0,sub:[{id:11,label:"Public transports",status:!0,icon:null,parentId:1},{id:12,label:"Fuels",status:!0,icon:null,parentId:1},{id:13,label:"Insurance",status:!0,icon:null,parentId:1},{id:14,label:"Maintenance",status:!0,icon:null,parentId:1}]},{id:2,label:"Hobbies",status:!0,icon:"fa-beer",isBudgeted:!0,sub:[{id:20,label:"Restaurant",status:!0,icon:null,parentId:2},{id:21,label:"Drink",status:!0,icon:null,parentId:2}]},{id:3,label:"Income",status:!0,icon:"fa-briefcase",isBudgeted:!0,sub:[{id:31,label:"Wages",status:!0,icon:null,parentId:3},{id:32,label:"Reward",status:!0,icon:null,parentId:3},{id:33,label:"Sells",status:!0,icon:null,parentId:3},{id:34,label:"Gifts",status:!1,icon:null,parentId:3}]},{id:4,label:"Home",status:!0,icon:"fa-home",isBudgeted:!0,sub:[{id:41,label:"Insurance",status:!0,icon:null,parentId:4},{id:42,label:"Rent",status:!0,icon:null,parentId:4},{id:43,label:"Mortgage",status:!1,icon:null,parentId:4},{id:44,label:"Furnishing",status:!0,icon:null,parentId:4},{id:45,label:"Electricity",status:!0,icon:null,parentId:4},{id:46,label:"Water",status:!0,icon:null,parentId:4},{id:47,label:"Internet",status:!0,icon:null,parentId:4}]},{id:5,label:"Clothing",status:!0,icon:"fa-user-secret",isBudgeted:!0,sub:[{id:51,label:"Clothes",status:!0,icon:null,parentId:5},{id:52,label:"Shoes",status:!0,icon:null,parentId:5}]}]},{method:"GET",url:"patterns",response:[{id:1,label:"MORS MUTUAL INSURANCE",category:1,subcategory:13},{id:2,label:"LOS SANTOS CUSTOMS*",category:1,subcategory:13},{id:2,label:"PONSONBY*",category:5,subcategory:51}]}];t.http.interceptors.push(function(t){for(var e=t.getUrl(),a=$.length,s=!1,n={},i=0;i<a;i++)if(t.method===$[i].method&&e===I["a"].API_URL+$[i].url){s=!0,n=$[i];break}return console.debug(e,s),s?t.respondWith(n.response,{status:200}):t.respondWith({status:404,statusText:"Not found"})})}}),be=a("c1df");i["default"].config.productionTip=!1,i["default"].use(r["a"]),i["default"].use(Qt["a"]),i["default"].use(le["a"]);var he=new r["a"].Store({state:{isOnline:null},mutations:{setConnectivity:function(t,e){t.isOnline=e}}}),fe=navigator.language;l["a"].getProfile()&&l["a"].user.language&&(fe=l["a"].user.language);var ge=new Qt["a"]({fallbackLocale:"en",locale:fe,messages:te,dateTimeFormats:ee,numberFormats:ae});i["default"].http.headers.common["Accept-Language"]=fe,document.querySelector("html").setAttribute("lang",fe),i["default"].use(de["a"],{i18nRootKey:"validations",i18n:ge,dictionary:{en:{messages:re.a.messages,attributes:te.en.fieldnames},fr:{messages:ce.a.messages,attributes:te.fr.fieldnames}}}),i["default"].use(ne.a,{moment:be});var ve=i["default"].moment.localeData();i["default"].use(pe.a,{defaultIconPack:"fa",defaultFirstDayOfWeek:ve.firstDayOfWeek(),defaultMonthNames:ve.months(),defaultDayNames:ve.weekdaysMin(),defaultDateFormatter:function(t){return i["default"].moment(t,"L").format("L")}}),i["default"].use(me),delete i["default"].http.headers.common["Authorization"];var ye=l["a"].getAuthHeader();ye&&(i["default"].http.headers.common["Authorization"]=ye),Zt.beforeEach(function(t,e,a){if(l["a"].getToken(),!l["a"].user.authenticated&&"login"!==t.name&&"setup"!==t.name)return l["a"].logout(),d["a"].$emit("user-logged",{}),void a("/login?redirect="+t.fullPath);if(t.meta.title){var s=t.meta.title,n=t.params;for(var i in n)s=s.replace(":"+i,n[i]);document.title=s+" | OwnMyMoney"}var r=document.getElementById("navbar-burger");r&&(r.classList.remove("is-active"),document.getElementById("navbar-menu").classList.remove("is-active")),a()}),i["default"].http.interceptors.push(function(t,e){e(function(t){return 401===t.status&&-1===Zt.currentRoute.fullPath.search(/^\/login/)&&(l["a"].logout(),d["a"].$emit("user-logged",{}),Zt.replace({name:"login",query:{redirect:Zt.currentRoute.fullPath}})),t})}),new i["default"]({router:Zt,i18n:ge,store:he,render:function(t){return t(k)}}).$mount("#money")},"66cd":function(t,e,a){},"6de1":function(t,e,a){"use strict";e["a"]={API_URL:"/server/api/"}},"8b71":function(t,e,a){"use strict";var s=a("e3a2"),n=a.n(s);n.a},a601:function(t,e,a){"use strict";var s=a("f499"),n=a.n(s),i=(a("673e"),a("2b0e")),r=a("6de1"),o=a("28dd");i["default"].use(o["a"]),e["a"]={data:function(){return{categories:[],categoriesAndSubcategoriesLookup:[],rCategories:i["default"].resource(r["a"].API_URL+"categories{/id}")}},methods:{handleResponse:function(t){function e(t){for(var e=[],a=0;a<t.length;a++){var s=t[a];e[s.id]=s;for(var n=0;n<s.sub.length;n++){var i=s.sub[n];e[i.id]=i}}return e}this.categories=t,this.categoriesAndSubcategoriesLookup=e(this.categories)},getCategories:function(t){var e=this,a="categoriesActives",s={};t&&(a="categories"),localStorage.getItem(a)?this.handleResponse(JSON.parse(localStorage.getItem(a))):this.rCategories.query(s).then(function(t){e.handleResponse(t.body),localStorage.setItem(a,n()(e.categories))},function(t){console.error(t)})}}}},d1dd:function(t,e,a){"use strict";var s=a("f499"),n=a.n(s),i=(a("673e"),a("0a0d")),r=a.n(i),o=(a("28a5"),a("ac6a"),a("a481"),a("2b0e")),c=a("d43b"),l=a("6de1");e["a"]={user:{authenticated:!1,token:null,id:null,login:null},login:function(t,e,a){var s=this;t.$http.post(l["a"].API_URL+"users/tokens",e).then(function(e){s.handleToken(e.body),c["a"].$emit("user-logged",s.user),a?t.$router.replace(a):t.$router.replace({name:"home"})},function(e){t.isLoading=!1,e.body.message?t.error=e.body.message:t.error=e.status+" - "+e.statusText})},logout:function(){return localStorage.removeItem("user"),this.user.authenticated=!1,delete o["default"].http.headers.common["Authorization"],this.user={},this.user},getAuthHeader:function(){var t=this.getToken();return t?"Bearer "+t:null},populate:function(t){if(t){this.user.token=t.token,this.user.id=t.id,this.user.login=t.login,this.user.mail=t.mail,this.user.language=t.language;var e={};t.scope&&t.scope.split(" ").forEach(function(t){e[t]=!0}),this.user.scope=e,this.user.exp=t.exp,this.user.authenticated=t.exp>Math.floor(r()()/1e3)}},handleToken:function(t){if(!t||!t.token)return!1;var e=t.token.split(".");if(3!==e.length)return!1;try{var a=JSON.parse(atob(e[1]));return a.token=t.token,a.id=a.sub,delete a.sub,localStorage.setItem("user",n()(a)),this.populate(a),o["default"].http.headers.common["Authorization"]=this.getAuthHeader(),!0}catch(s){return console.error(s),!1}},getProfile:function(){return!!this.getToken()&&JSON.parse(n()(this.user))},getToken:function(){try{var t=JSON.parse(localStorage.getItem("user"));return this.populate(t),this.user.token}catch(e){return console.error(e),!1}}}},d43b:function(t,e,a){"use strict";var s=a("2b0e");e["a"]=new s["default"]},d803:function(t,e,a){t.exports=a.p+"img/icon-whitesmoke.56bc37d4.svg"},e3a2:function(t,e,a){},f4de:function(t,e,a){}});
//# sourceMappingURL=app.ba10976c.js.map