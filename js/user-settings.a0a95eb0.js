(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-settings"],{"0a49":function(t,s,e){var a=e("9b43"),i=e("626a"),n=e("4bf8"),r=e("9def"),o=e("cd1c");t.exports=function(t,s){var e=1==t,l=2==t,c=3==t,d=4==t,u=6==t,p=5==t||u,v=s||o;return function(s,o,m){for(var f,g,h=n(s),b=i(h),_=a(o,m,3),C=r(b.length),y=0,w=e?v(s,C):l?v(s,0):void 0;C>y;y++)if((p||y in b)&&(f=b[y],g=_(f,y,h),t))if(e)w[y]=g;else if(g)switch(t){case 3:return!0;case 5:return f;case 6:return y;case 2:w.push(f)}else if(d)return!1;return u?-1:c||d?d:w}}},1169:function(t,s,e){var a=e("2d95");t.exports=Array.isArray||function(t){return"Array"==a(t)}},"20d6":function(t,s,e){"use strict";var a=e("5ca1"),i=e("0a49")(6),n="findIndex",r=!0;n in[]&&Array(1)[n](function(){r=!1}),a(a.P+a.F*r,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")(n)},"66aa":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:this.$t("labels.home")},{link:"/profile",icon:"fa-user-circle",text:this.$t("labels.profile"),isActive:!0}]}})],1),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v(t._s(t.$t("labels.profile")))]),e("p",{staticClass:"subtitle has-text-grey"},[t._v(t._s(t.$t("labels.profileLabel")))]),e("form",{staticClass:"section is-max-width-form",attrs:{novalidate:""},on:{submit:function(s){return s.preventDefault(),t.validateBeforeSubmit(s)}}},[e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.login")))])]),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.login,expression:"user.login"},{name:"validate",rawName:"v-validate",value:"required|min:3|alpha",expression:"'required|min:3|alpha'"}],staticClass:"input",class:{input:!0,"is-danger":t.errors.has("login")},attrs:{type:"text",name:"login",placeholder:"Type your new login"},domProps:{value:t.user.login},on:{input:function(s){s.target.composing||t.$set(t.user,"login",s.target.value)}}}),t._m(0),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("login"),expression:"errors.has('login')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("login")))])])])])]),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.newPassword")))])]),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:5",expression:"'required|min:5'"}],staticClass:"input",class:{input:!0,"is-danger":t.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"Type your new password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}}),t._m(1),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("password")))])])])])]),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.email")))])]),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-left has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.mail,expression:"user.mail"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"input",class:{input:!0,"is-danger":t.errors.has("email")},attrs:{type:"email",name:"email",placeholder:"Type your mail address"},domProps:{value:t.user.mail},on:{input:function(s){s.target.composing||t.$set(t.user,"mail",s.target.value)}}}),t._m(2),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("email"),expression:"errors.has('email')"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("email"),expression:"errors.has('email')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("email")))])])])])]),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.language")))])]),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.language,expression:"user.language"}],attrs:{name:"language"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(t.user,"language",s.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("labels.automatic")))]),e("option",{attrs:{value:"fr"}},[t._v("Français")]),e("option",{attrs:{value:"en"}},[t._v("English")])])])])])])]),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field is-grouped"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{disabled:!t.isOnline}},[e("span",{staticClass:"fa fa-save fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("actions.save")))])]),e("div",{staticClass:"control"},[e("a",{staticClass:"button is-light",on:{click:function(s){return t.$router.go(-1)}}},[e("span",{staticClass:"fa fa-ban fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("actions.cancel")))])])])])]),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"}),e("div",{staticClass:"field-body"},[t.error?e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n                "+t._s(t.error)+"\n              ")])]):t._e()])]),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}})],1),e("user-connections",{attrs:{id:this.user.id}})],1)])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fa fa-user"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fa fa-lock"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fa fa-envelope"})])}],n=e("d1dd"),r=e("6de1"),o=e("2fbc"),l=e("87a0"),c={name:"profile",components:{UserConnections:l["a"],Breadcrumb:o["a"]},data:function(){return{user:n["a"].getProfile(),password:"",error:"",isLoading:!1,rUsers:this.$resource(r["a"].API_URL+"users{/id}")}},computed:{isOnline:function(){return this.$store.state.isOnline}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(s){s&&(t.isLoading=!0,t.rUsers.update({id:t.user.id},{sub:t.user.id,login:t.user.login,password:t.password,mail:t.user.mail,language:t.user.language}).then(function(t){},function(s){s.body.message?t.error=s.body.message:t.error=s.status+" - "+s.statusText}).finally(function(){this.isLoading=!1}))})}}},d=c,u=e("2877"),p=Object(u["a"])(d,a,i,!1,null,null,null);s["default"]=p.exports},"84ba":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:this.$t("labels.home")},{link:"/about",icon:"fa-info-circle",text:this.$t("labels.about"),isActive:!0}]}})],1),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v(t._s(t.$t("labels.about")))]),e("p",{staticClass:"subtitle has-text-grey"},[t._v("Own my money")]),t.isLoaded?e("div",{staticClass:"content field is-grouped is-grouped-multiline"},[e("div",{staticClass:"control"},[e("div",{staticClass:"tags has-addons"},[e("span",{staticClass:"tag is-dark"},[t._v("Installed version")]),e("span",{staticClass:"tag",class:[t.isUpToDate?"is-success":"is-danger"]},[t._v(t._s(t.version.installed))])])]),t.isUpToDate?t._e():e("div",{staticClass:"control"},[e("div",{staticClass:"tags has-addons"},[e("span",{staticClass:"tag is-dark"},[t._v("Latest version")]),e("span",{staticClass:"tag is-info"},[t._v(t._s(t.version.latest))])])]),t._m(0)]):t._e(),!t.isUpToDate&&this.user.scope.admin?e("section",{staticClass:"content"},[e("button",{staticClass:"button is-primary",class:{"is-loading":t.isUpdating},attrs:{disabled:!t.isOnline||t.isUpdating},on:{click:t.update}},[t._m(1),e("span",[t._v(t._s(t.$t("actions.updateTo"))+" "+t._s(t.version.latest))])]),t.updateLogs?e("pre",{staticClass:"section content"},t._l(t.updateLogs,function(s){return e("span",{staticClass:"is-block"},[t._v(t._s(t._f("moment")(s.timestamp,"HH:mm:ss"))+"   "+t._s(s.message))])}),0):t._e()]):t._e(),e("section",{staticClass:"content",domProps:{innerHTML:t._s(t.$t("labels.aboutText"))}})])])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"control"},[e("a",{attrs:{href:"https://github.com/nioc/own-my-money/releases/latest",target:"_blank"}},[t._v("Changelog")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-wrench"})])}],n=e("6de1"),r=e("d1dd"),o=e("2fbc"),l={name:"about",components:{Breadcrumb:o["a"]},data:function(){return{version:{installed:"",latest:""},isUpToDate:!0,user:r["a"].getProfile(),updateLogs:null,isLoaded:!1,isUpdating:!1,rVersions:this.$resource(n["a"].API_URL+"setup/versions/latest")}},computed:{isOnline:function(){return this.$store.state.isOnline}},methods:{get:function(){var t=this;this.rVersions.query().then(function(s){t.version=s.body,t.version.installed!==t.version.latest&&(t.isUpToDate=!1)},function(t){t.body.message?console.log(t.body.message):console.log(t.status+" - "+t.statusText)}).finally(function(){this.isLoaded=!0})},update:function(){var t=this;this.updateLogs="",this.isUpdating=!0,this.rVersions.save().then(function(s){t.updateLogs=s.body,t.get()},function(s){s.body.message?t.updateLogs=s.body.message:console.log(s.status+" - "+s.statusText)}).finally(function(){this.isUpdating=!1})}},mounted:function(){this.get()}},c=l,d=e("2877"),u=Object(d["a"])(c,a,i,!1,null,null,null);s["default"]=u.exports},cd1c:function(t,s,e){var a=e("e853");t.exports=function(t,s){return new(a(t))(s)}},dc4a:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"}),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[t.steps.length?e("ul",{staticClass:"steps is-horizontal is-medium is-centered has-content-centered"},t._l(t.steps,function(s){return e("li",{key:s.label,staticClass:"steps-segment has-gaps",class:{"is-active":s.isActive}},[e("span",{staticClass:"steps-marker"},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa",class:s.icon})])]),e("div",{staticClass:"steps-content"},[e("p",{staticClass:"heading"},[t._v(t._s(s.label))])])])}),0):e("div",{staticClass:"content has-text-grey has-text-centered"},[t._v(t._s(t.$t("labels.nothingToDo")))]),t.steps.length>0?e("form",{staticClass:"section is-max-width-form",attrs:{novalidate:""},on:{submit:function(s){return s.preventDefault(),t.validateBeforeSubmit(s)}}},[t.steps[t.currentStep].help?e("div",{staticClass:"content has-text-grey has-text-centered",domProps:{innerHTML:t._s(t.steps[t.currentStep].help)}}):t._e(),t._l(t.steps[t.currentStep].fields,function(s){return e("div",{key:s.name,staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v(t._s(s.label))])]),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control has-icons-right"},["checkbox"===s.type?e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:s.validate,expression:"field.validate"}],staticClass:"input",class:{"is-danger":t.errors.has(s.name)},attrs:{name:s.name,placeholder:s.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(s.value)?t._i(s.value,null)>-1:s.value},on:{change:function(e){var a=s.value,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);i.checked?o<0&&t.$set(s,"value",a.concat([r])):o>-1&&t.$set(s,"value",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(s,"value",n)}}}):"radio"===s.type?e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:s.validate,expression:"field.validate"}],staticClass:"input",class:{"is-danger":t.errors.has(s.name)},attrs:{name:s.name,placeholder:s.placeholder,type:"radio"},domProps:{checked:t._q(s.value,null)},on:{change:function(e){return t.$set(s,"value",null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:s.validate,expression:"field.validate"}],staticClass:"input",class:{"is-danger":t.errors.has(s.name)},attrs:{name:s.name,placeholder:s.placeholder,type:s.type},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has(s.name),expression:"errors.has(field.name)"}],staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa fa-exclamation-triangle"})]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has(s.name),expression:"errors.has(field.name)"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first(s.name)))])]),s.help?e("p",{staticClass:"help"},[t._v(t._s(s.help))]):t._e()])])])}),t.currentStep<t.steps.length-1?e("div",{staticClass:"has-text-centered"},[e("button",{staticClass:"button is-primary",attrs:{disabled:!t.isOnline||t.errors.any()}},[t._m(0),e("span",[t._v(t._s(t.$t("actions.next")))])])]):t._e()],2):t._e(),t.error?e("div",{staticClass:"is-centered columns"},[e("div",{staticClass:"column is-narrow"},[e("div",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[t._v("\n              "+t._s(t.error)+"\n            ")])])])]):t._e(),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}})],1)])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-arrow-circle-right"})])}],n=(e("7f7f"),e("20d6"),e("6de1")),r={name:"setup",data:function(){return{currentStep:null,steps:[],error:"",isLoading:!1,rSteps:this.$resource(n["a"].API_URL+"setup/steps{/code}"),rFields:this.$resource(n["a"].API_URL+"setup/steps{/code}/fields")}},computed:{isOnline:function(){return this.$store.state.isOnline}},methods:{getSteps:function(){var t=this;this.isLoading=!0,this.rSteps.query().then(function(s){t.steps=s.body,t.setStep(t.steps.findIndex(function(t){return t.isActive}))},function(s){s.body.message?t.error=s.body.message:t.error=s.status+" - "+s.statusText}).finally(function(){this.isLoading=!1})},setStep:function(t){(t<0||t>=this.steps.length)&&(t=0),this.steps.map(function(t){return t.isActive=!1,t}),this.steps.length&&(this.steps[t].isActive=!0),this.currentStep=t},validateBeforeSubmit:function(){var t=this;this.error="",this.$validator.validateAll().then(function(s){if(s){t.isLoading=!0;var e=t.steps[t.currentStep].code,a=t.steps[t.currentStep].fields.map(function(t){var s={};return s.name=t.name,s.value=t.value,s});t.rFields.update({code:e},a).then(function(s){t.currentStep++,t.setStep(t.currentStep)},function(s){s.body.message?t.error=s.body.message:t.error=s.status+" - "+s.statusText}).finally(function(){this.isLoading=!1})}})}},mounted:function(){this.getSteps()}},o=r,l=e("2877"),c=Object(l["a"])(o,a,i,!1,null,null,null);s["default"]=c.exports},dca5:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"hero"},[e("div",{staticClass:"hero-head"},[e("breadcrumb",{attrs:{items:[{link:"/",icon:"fa-home",text:this.$t("labels.home")},{link:"/patterns",icon:"fa-magic",text:this.$tc("objects.pattern",2),isActive:!0}]}})],1),e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container box"},[e("h1",{staticClass:"title container"},[t._v(t._s(t.$tc("objects.pattern",2)))]),e("p",{staticClass:"subtitle has-text-grey"},[t._v(t._s(t.$t("labels.patternsLabel")))]),e("b-table",{staticClass:"table-container",attrs:{data:t.patterns,striped:!0,hoverable:!0},on:{select:t.edit},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-table-column",{attrs:{label:t.$t("fieldnames.label")}},[t._v("\n            "+t._s(s.row.label)+"\n          ")]),e("b-table-column",{attrs:{label:t.$tc("objects.category",1)}},[s.row.category&&t.categoriesAndSubcategoriesLookup[s.row.category]?e("span",[t._v(t._s(t.categoriesAndSubcategoriesLookup[s.row.category].label))]):t._e()]),e("b-table-column",{attrs:{label:t.$tc("objects.subcategory",1)}},[s.row.subcategory&&t.categoriesAndSubcategoriesLookup[s.row.subcategory]?e("span",[t._v(t._s(t.categoriesAndSubcategoriesLookup[s.row.subcategory].label))]):t._e()])]}}])}),e("div",{staticClass:"field is-grouped"},[e("p",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{role:"button",disabled:!t.isOnline},on:{click:t.create}},[t._m(0),e("span",[t._v(t._s(t.$t("actions.addPattern")))])])]),e("p",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{role:"button",disabled:!t.isOnline},on:{click:t.suggest}},[t._m(1),e("span",[t._v(t._s(t.$t("actions.suggestPatterns")))])])])]),t.error?e("div",{staticClass:"message is-danger block"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e(),e("b-table",{staticClass:"table-container",attrs:{data:t.suggestedPatterns,striped:!0,hoverable:!0},on:{select:t.createSuggested},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-table-column",{attrs:{label:t.$t("fieldnames.label")}},[t._v("\n            "+t._s(s.row.label)+"\n          ")]),e("b-table-column",{attrs:{label:t.$tc("objects.category",1)}},[s.row.category&&t.categoriesAndSubcategoriesLookup[s.row.category]?e("span",[t._v(t._s(t.categoriesAndSubcategoriesLookup[s.row.category].label))]):t._e()]),e("b-table-column",{attrs:{label:t.$tc("objects.subcategory",1)}},[s.row.subcategory&&t.categoriesAndSubcategoriesLookup[s.row.subcategory]?e("span",[t._v(t._s(t.categoriesAndSubcategoriesLookup[s.row.subcategory].label))]):t._e()]),e("b-table-column",{attrs:{label:t.$tc("objects.occurence",2)}},[t._v("\n            "+t._s(s.row.count)+"\n          ")])]}}])}),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}})],1)]),e("b-modal",{attrs:{active:t.modalPattern.isActive,"has-modal-card":"",scroll:"keep"},on:{"update:active":function(s){return t.$set(t.modalPattern,"isActive",s)}}},[e("transaction-pattern",{attrs:{pattern:t.modalPattern.pattern,rPatterns:t.rPatterns}})],1)],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-plus"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-cogs"})])}],n=e("f499"),r=e.n(n),o=e("6de1"),l=e("2fbc"),c=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("form",{attrs:{novalidate:""},on:{submit:function(s){return s.preventDefault(),t.validateBeforeSubmit(s)}}},[e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$tc("objects.pattern",1)))])]),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v(t._s(t.$t("fieldnames.label")))]),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.pattern.label,expression:"pattern.label",modifiers:{lazy:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input",class:{"is-danger":t.errors.has("label")},attrs:{type:"text",name:"label",placeholder:"Transaction name to be find"},domProps:{value:t.pattern.label},on:{change:[function(s){return t.$set(t.pattern,"label",s.target.value)},t.count]}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("label"),expression:"errors.has('label')"}],staticClass:"help is-danger"},[t._v(t._s(t.errors.first("label")))])]),e("p",{staticClass:"help"},[t._v(t._s(t.$t("labels.patternWildcardHelper"))),null!==t.matchingCount?e("span",[t._v(" - "+t._s(t.matchingCount)+" "+t._s(t.$tc("objects.occurence",t.matchingCount).toLowerCase()))]):t._e()])]),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v(t._s(t.$tc("objects.category",1)))]),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.pattern.category,expression:"pattern.category"}],attrs:{name:"parent"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(t.pattern,"category",s.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- "+t._s(t.$tc("objects.category",1))+" --")]),t._l(t.categories,function(s){return e("option",{key:s.id,domProps:{value:s.id}},[t._v(t._s(s.label))])})],2)])])]),t.pattern.category&&t.categoriesAndSubcategoriesLookup[t.pattern.category]&&t.categoriesAndSubcategoriesLookup[t.pattern.category].sub.length>0?e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v(t._s(t.$tc("objects.subcategory",1)))]),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.pattern.subcategory,expression:"pattern.subcategory"}],attrs:{name:"parent"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(t.pattern,"subcategory",s.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- "+t._s(t.$tc("objects.subcategory",1))+" --")]),t._l(t.categoriesAndSubcategoriesLookup[t.pattern.category].sub,function(s){return e("option",{key:s.id,domProps:{value:s.id}},[t._v(t._s(s.label))])})],2)])])]):t._e(),t.error?e("div",{staticClass:"message is-danger block"},[e("div",{staticClass:"message-body"},[t._v("\n          "+t._s(t.error)+"\n        ")])]):t._e()]),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button is-primary",attrs:{disabled:!t.isOnline}},[t._m(0),e("span",[t._v(t._s(t.$t("actions.save")))])]),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(s){return t.$parent.close()}}},[t._v(t._s(t.$t("actions.cancel")))]),t.pattern.id?e("button",{staticClass:"button is-danger",attrs:{type:"button",disabled:!t.isOnline},on:{click:t.deletePattern}},[t._m(1),e("span",[t._v(t._s(t.$t("actions.delete")))])]):t._e()]),e("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}})],1)])},d=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-save"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-trash"})])}],u=e("a601"),p={props:["rPatterns","pattern"],mixins:[u["a"]],data:function(){return{error:"",matchingCount:null,rTransactions:this.$resource(o["a"].API_URL+"transactions"),isLoading:!1}},computed:{isOnline:function(){return this.$store.state.isOnline}},methods:{deletePattern:function(){var t=this;this.$dialog.confirm({message:this.$t("labels.deletePatternMsg"),title:this.$t("labels.deletePattern"),type:"is-danger",hasIcon:!0,icon:"trash",confirmText:this.$t("actions.deletePattern"),focusOn:"cancel",onConfirm:function(){t.isLoading=!0,t.rPatterns.delete({id:t.pattern.id}).then(function(s){t.$parent.close();var e=t.$parent.$parent.patterns,a=e.map(function(t){return t.id}).indexOf(t.pattern.id);e.splice(a,1)},function(s){t.isLoading=!1,s.body.message?t.error=s.body.message:t.error=s.status+" - "+s.statusText})}})},validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(s){if(s){if(t.isLoading=!0,!t.pattern.id)return void t.rPatterns.save(t.pattern).then(function(s){t.pattern.id=s.body.id,t.$parent.close()},function(s){t.isLoading=!1,s.body.message?t.error=s.body.message:t.error=s.status+" - "+s.statusText});t.rPatterns.update({id:t.pattern.id},t.pattern).then(function(s){t.$parent.close()},function(s){t.isLoading=!1,s.body.message?t.error=s.body.message:t.error=s.status+" - "+s.statusText})}})},count:function(){var t=this;this.pattern.label&&this.rTransactions.query({pattern:this.pattern.label}).then(function(s){t.matchingCount=s.body.length,console.log(s.body.length)},function(t){console.error(t)})}},watch:{"pattern.category":function(){this.pattern.subcategory=""}},mounted:function(){this.getCategories(!1)}},v=p,m=e("2877"),f=Object(m["a"])(v,c,d,!1,null,null,null),g=f.exports,h={name:"patterns",components:{TransactionPattern:g,Breadcrumb:l["a"]},mixins:[u["a"]],data:function(){return{patterns:[],suggestedPatterns:[],error:"",isLoading:!1,modalPattern:{isActive:!1,pattern:{}},rPatterns:this.$resource(o["a"].API_URL+"patterns{/id}"),rTransactionsPatterns:this.$resource(o["a"].API_URL+"transactions/patterns")}},computed:{isOnline:function(){return this.$store.state.isOnline}},methods:{get:function(){var t=this;this.isLoading=!0,this.rPatterns.query().then(function(s){t.patterns=s.body},function(s){s.body.message?t.error=s.body.message:t.error=s.status+" - "+s.statusText}).finally(function(){this.isLoading=!1})},create:function(){var t={label:"",category:"",subcategory:""};this.patterns.push(t),this.modalPattern.pattern=t,this.modalPattern.isActive=!0},edit:function(t){this.modalPattern.pattern=t,this.modalPattern.isActive=!0},suggest:function(){var t=this;this.isLoading=!0,this.rTransactionsPatterns.query().then(function(s){t.suggestedPatterns=s.body},function(s){s.body.message?t.error=s.body.message:t.error=s.status+" - "+s.statusText}).finally(function(){this.isLoading=!1})},createSuggested:function(t){var s=JSON.parse(r()(t));this.patterns.push(s),this.edit(s)}},mounted:function(){this.get(),this.getCategories()}},b=h,_=Object(m["a"])(b,a,i,!1,null,null,null);s["default"]=_.exports},e853:function(t,s,e){var a=e("d3f4"),i=e("1169"),n=e("2b4c")("species");t.exports=function(t){var s;return i(t)&&(s=t.constructor,"function"!=typeof s||s!==Array&&!i(s.prototype)||(s=void 0),a(s)&&(s=s[n],null===s&&(s=void 0))),void 0===s?Array:s}}}]);
//# sourceMappingURL=user-settings.a0a95eb0.js.map